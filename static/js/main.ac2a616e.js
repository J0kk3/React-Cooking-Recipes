/*! For license information please see main.ac2a616e.js.LICENSE.txt */
!function(){"use strict";var e={725:function(e){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,v={},p={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(v,e)&&(h.test(e)?p[e]=!0:(v[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,E=60106,S=60107,I=60108,_=60114,T=60109,C=60110,N=60112,D=60113,A=60120,O=60115,P=60116,L=60121,R=60128,M=60129,F=60130,V=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),E=j("react.portal"),S=j("react.fragment"),I=j("react.strict_mode"),_=j("react.profiler"),T=j("react.provider"),C=j("react.context"),N=j("react.forward_ref"),D=j("react.suspense"),A=j("react.suspense_list"),O=j("react.memo"),P=j("react.lazy"),L=j("react.block"),j("react.scope"),R=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),V=j("react.legacy_hidden")}var B,U="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function z(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function Q(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case _:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return H(e.type);case L:return H(e._render);case P:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function W(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ce(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ve(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ce=null,Ne=null;function De(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function Ae(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function Pe(e,t){return e(t)}function Le(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var Me=Pe,Fe=!1,Ve=!1;function je(){null===Ce&&null===Ne||(Re(),Oe())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ue=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Ue=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,Ge=null,Qe=!1,He=null,We={onError:function(e){Ke=!0,Ge=e}};function $e(e,t,n,r,i,a,o,u,s){Ke=!1,Ge=null,ze.apply(We,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=vt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},It={},_t={};function Tt(e){if(It[e])return It[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in _t)return It[e]=n[t];return e}f&&(_t=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var Ct=Tt("animationend"),Nt=Tt("animationiteration"),Dt=Tt("animationstart"),At=Tt("transitionend"),Ot=new Map,Pt=new Map,Lt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",Dt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Ot.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Vt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Bt(10,t):e;case 10:return 0===(e=Ut(192&~t))?Bt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Qt|0)|0},Gt=Math.log,Qt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Wt=a.unstable_runWithPriority,$t=!0;function Yt(e,t,n,r){Fe||Re();var i=Jt,a=Fe;Fe=!0;try{Le(i,e,t,n,r)}finally{(Fe=a)||je()}}function Xt(e,t,n,r){Wt(Ht,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=vt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=vt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;pt(e,r)}Rr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=_e(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Rr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),vn=i({},hn,{view:0,detail:0}),pn=sn(vn),yn=i({},vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},vn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),En=sn(i({},hn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Cn(){return Tn}var Nn=i({},vn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=sn(Nn),An=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=sn(i({},vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Ln),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Vn=null;f&&"documentMode"in document&&(Vn=document.documentMode);var jn=f&&"TextEvent"in window&&!Vn,Bn=f&&(!Fn||Vn&&8<Vn&&11>=Vn),Un=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ae(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Xn(e){Nr(e,0)}function Jn(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Yn=$n=null)}function ar(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Wn(t,Yn,e,_e(e)),e=Xn,Fe)e(t);else{Fe=!0;try{Pe(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function sr(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Lt,2);for(var Sr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<Sr.length;Ir++)Pt.set(Sr[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if($e.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=Ge;Ke=!1,Ge=null,Qe||(Qe=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(Qe)throw e=He,Qe=!1,He=null,e}function Dr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Lr(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Ar]||(e[Ar]=!0,u.forEach((function(t){Tr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Lr(a,e,i,t),o.add(u))}function Lr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ve)return e(t,n);Ve=!0;try{Me(e,t,n)}finally{Ve=!1,je()}}((function(){var r=a,i=_e(n),o=[];e:{var u=Ot.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Dn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=On;break;case Ct:case Nt:case Dt:s=wn;break;case At:s=Pn;break;case"scroll":s=pn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Be(v,h))&&l.push(Mr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,ni(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Vr(d))v++;for(d=0,p=h;p;p=Vr(p))d++;for(;0<v-d;)l=Vr(l),v--;for(;0<d-v;)h=Vr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Vr(l),h=Vr(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Hn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Er(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Er(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Bn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Gn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(m=Fr(r,k)).length&&(k=new En(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Un);case"textInput":return(e=t.data)===Un&&qn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Be(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Be(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Be(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Br(){}var Ur=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Qr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Jr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),vi=ci(!1),pi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(vi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(vi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,fi(di,e),fi(vi,vi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,li(vi),li(di),fi(di,e)):li(vi),fi(vi,n)}var Ei=null,Si=null,Ii=a.unstable_runWithPriority,_i=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Di=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Oi=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Li=a.unstable_NormalPriority,Ri=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Vi=void 0!==Ni?Ni:function(){},ji=null,Bi=null,Ui=!1,qi=Di(),zi=1e4>qi?Di:function(){return Di()-qi};function Ki(){switch(Ai()){case Oi:return 99;case Pi:return 98;case Li:return 97;case Ri:return 96;case Mi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Oi;case 98:return Pi;case 97:return Li;case 96:return Ri;case 95:return Mi;default:throw Error(o(332))}}function Qi(e,t){return e=Gi(e),Ii(e,t)}function Hi(e,t,n){return e=Gi(e),_i(e,t,n)}function Wi(){if(null!==Bi){var e=Bi;Bi=null,Ti(e)}$i()}function $i(){if(!Ui&&null!==ji){Ui=!0;var e=0;try{var t=ji;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),_i(Oi,Wi),n}finally{Ui=!1}}}var Yi=b.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,p=o;switch(s=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){h=v.call(d,h,s);break e}h=v;break e;case 3:v.flags=-4097&v.flags|64;case 0:if(null===(s="function"===typeof(v=p.payload)?v.call(d,h,s):v)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Uu|=u,e.lanes=u,e.memoizedState=h}}function va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var pa=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),vs(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),vs(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),vs(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?pi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=pa,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?pi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function Ea(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===pa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Sa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Qs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ea(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=Ea(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ws(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ys(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=Ea(e,null,t),n.return=e,n;case E:return(t=Xs(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Ws(t,e.mode,n,null)).return=e,t;Sa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===S?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Sa(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===S?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Sa(t,r)}return null}function p(i,o,u,s){for(var c=null,l=null,f=o,p=o=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,p),null===l?c=m:l.sibling=m,l=m,f=y}if(p===u.length)return n(i,f),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(o=a(f,o,p),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),o=a(y,o,p),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),l;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===S&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===S){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ea(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===S?((r=Ws(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=Ea(e,r,a),s.return=e,e=s)}return u(e);case E:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ys(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return p(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&Sa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var _a=Ia(!0),Ta=Ia(!1),Ca={},Na=ci(Ca),Da=ci(Ca),Aa=ci(Ca);function Oa(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Aa,t),fi(Da,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ve(null,"");break;default:t=ve(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function La(){li(Na),li(Da),li(Aa)}function Ra(e){Oa(Aa.current);var t=Oa(Na.current),n=ve(t,e.type);t!==n&&(fi(Da,e),fi(Na,n))}function Ma(e){Da.current===e&&(li(Na),li(Da))}var Fa=ci(0);function Va(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Ba=null,Ua=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ua){var t=Ba;if(t){var n=t;if(!za(e,t)){if(!(t=Wr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ua=!1,void(ja=e);qa(ja,n)}ja=e,Ba=Wr(t.firstChild)}else e.flags=-1025&e.flags|2,Ua=!1,ja=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Qa(e){if(e!==ja)return!1;if(!Ua)return Ga(e),Ua=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Ba;t;)qa(e,t),t=Wr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ba=Wr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ba=null}}else Ba=ja?Wr(e.stateNode.nextSibling):null;return!0}function Ha(){Ba=ja=null,Ua=!1}var Wa=[];function $a(){for(var e=0;e<Wa.length;e++)Wa[e]._workInProgressVersionPrimary=null;Wa.length=0}var Ya=b.ReactCurrentDispatcher,Xa=b.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Po:Lo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Ro,e=n(r,i)}while(ro)}if(Ya.current=Oo,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Uu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Wa.push(t))),e)return n(t._source);throw Wa.push(t),Error(o(350))}function vo(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ya.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,v=d.getSnapshot,p=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(v,n)&&lr(p,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ao.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function po(e,t,n){return vo(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ao.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function Eo(e,t){return bo(516,4,e,t)}function So(e,t){return bo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _o(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Io.bind(null,t,e),n)}function To(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Do(e,t){var n=Ki();Qi(98>n?98:n,(function(){e(!0)})),Qi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ao(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}vs(e,i,r)}}var Oo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:To,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Do.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},vo(r,e,t,n)},useOpaqueIdentifier:function(){if(Ua){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:_o,useLayoutEffect:So,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Eo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:_o,useLayoutEffect:So,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return Eo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Vo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):_a(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Vo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Bo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Qs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Uo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Vo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=mi(n)?pi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Vo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Go(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?pi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||vi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Xi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?pi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||vi.current||ua?("function"===typeof d&&(ya(t,n,d,r),v=t.memoizedState),(c=ua||ga(t,n,c,r,h,v,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Qo(e,t,n,r,a,i)}function Qo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=_a(t,e.child,null,a),t.child=_a(t,null,u,a)):Vo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Wo,$o,Yo,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=$s({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$s(t,i,0,null),n=Ws(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Qs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Qs(o,u),null!==e?r=Qs(e,r):(r=Ws(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Vo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Va(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Va(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Qs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Qs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ua)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return La(),li(vi),li(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Qa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Oa(Aa.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oa(Na.current),Qa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Jr]=t,r[Zr]=u,n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(e=0;e<_r.length;e++)Dr(_r[e],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":ee(r,u),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Dr("invalid",r);break;case"textarea":se(r,u),Dr("invalid",r)}for(var c in Se(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Dr("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Br)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Wo(e,t),t.stateNode=e,c=Ie(n,r),n){case"dialog":Dr("cancel",e),Dr("close",e),a=r;break;case"iframe":case"object":case"embed":Dr("load",e),a=r;break;case"video":case"audio":for(a=0;a<_r.length;a++)Dr(_r[a],e);a=r;break;case"source":Dr("error",e),a=r;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),a=r;break;case"details":Dr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Dr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Dr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Dr("invalid",e);break;default:a=r}Se(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Dr("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Br)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oa(Aa.current),Oa(Na.current),Qa(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Qa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Vu&&(Vu=3):(0!==Vu&&3!==Vu||(Vu=4),null===Pu||0===(134217727&Uu)&&0===(134217727&qu)||gs(Pu,Ru))),(r||n)&&(t.flags|=4),null);case 4:return La(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Vu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Va(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Qu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Va(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ua)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Qu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return Es(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(La(),li(vi),li(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return La(),null;case 10:return ra(e),null;case 23:case 24:return Es(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=Q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Oa(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Br)}for(f in Se(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Dr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===R?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yu||(Yu=!0,Xu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ju?Ju=new Set([this]):Ju.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var vu="function"===typeof WeakSet?WeakSet:Set;function pu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Bs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&va(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}va(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Si&&"function"===typeof Si.onCommitFiberUnmount)try{Si.onCommitFiberUnmount(Ei,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Bs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(pu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Bs(t,a)}break;case 5:pu(t);break;case 4:Iu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Eu(e,n,t):Su(e,n,t)}function Eu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Br));else if(4!==r&&null!==(e=e.child))for(Eu(e,t,n),e=e.sibling;null!==e;)Eu(e,t,n),e=e.sibling}function Su(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Su(e,t,n),e=e.sibling;null!==e;)Su(e,t,n),e=e.sibling}function Iu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function _u(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=zi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new vu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Du=b.ReactCurrentDispatcher,Au=b.ReactCurrentOwner,Ou=0,Pu=null,Lu=null,Ru=0,Mu=0,Fu=ci(0),Vu=0,ju=null,Bu=0,Uu=0,qu=0,zu=0,Ku=null,Gu=0,Qu=1/0;function Hu(){Qu=zi()+500}var Wu,$u=null,Yu=!1,Xu=null,Ju=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ou)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=Bu),0!==Yi.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ou)&&98===e?e=Bt(12,ss):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function vs(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=ps(e,t)))return null;zt(e,t,n),e===Pu&&(qu|=t,4===Vu&&gs(e,Ru));var r=Ki();1===t?0!==(8&Ou)&&0===(48&Ou)?ks(e):(ys(e,n),0===Ou&&(Hu(),Wi())):(0===(4&Ou)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function ps(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Vt(e,e===Pu?Ru:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ti(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Bi=_i(Oi,$i)):ji.push(n),n=Fi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Ou))throw Error(o(327));var t=e.callbackNode;if(Rs()&&e.callbackNode!==t)return null;var n=Vt(e,e===Pu?Ru:0);if(0===n)return null;var r=n,i=Ou;Ou|=16;var a=_s();for(Pu===e&&Ru===r||(Hu(),Ss(e,r));;)try{Ns();break}catch(s){Is(e,s)}if(na(),Du.current=a,Ou=i,null!==Lu?r=0:(Pu=null,Ru=0,r=Vu),0!==(Bu&qu))Ss(e,0);else if(0!==r){if(2===r&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=Ts(e,n))),1===r)throw t=ju,Ss(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Os(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-zi())){if(0!==Vt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Os.bind(null,e),r);break}Os(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Gr(Os.bind(null,e),n);break}Os(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ou))throw Error(o(327));if(Rs(),e===Pu&&0!==(e.expiredLanes&Ru)){var t=Ru,n=Ts(e,t);0!==(Bu&qu)&&(n=Ts(e,t=Vt(e,t)))}else n=Ts(e,t=Vt(e,0));if(0!==e.tag&&2===n&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=Ts(e,t))),1===n)throw n=ju,Ss(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),ys(e,zi()),null}function ws(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Wi())}}function bs(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Wi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,Bu|=t}function Es(){Mu=Fu.current,li(Fu)}function Ss(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Qr(n)),null!==Lu)for(n=Lu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:La(),li(vi),li(di),$a();break;case 5:Ma(r);break;case 4:La();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:Es()}n=n.return}Pu=e,Lu=Qs(e.current,null),Ru=Mu=Bu=t,Vu=0,ju=null,zu=qu=Uu=0}function Is(e,t){for(;;){var n=Lu;try{if(na(),Ya.current=Oo,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Au.current=null,null===n||null===n.return){Vu=1,ju=t,Lu=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Ru,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var v=h.memoizedState;if(null!==v)d=null!==v.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=Us.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Vu&&(Vu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ju||!Ju.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}As(n)}catch(E){t=E,Lu===n&&null!==n&&(Lu=n=n.return);continue}break}}function _s(){var e=Du.current;return Du.current=Oo,null===e?Oo:e}function Ts(e,t){var n=Ou;Ou|=16;var r=_s();for(Pu===e&&Ru===t||Ss(e,t);;)try{Cs();break}catch(i){Is(e,i)}if(na(),Ou=n,Du.current=r,null!==Lu)throw Error(o(261));return Pu=null,Ru=0,Vu}function Cs(){for(;null!==Lu;)Ds(Lu)}function Ns(){for(;null!==Lu&&!Ci();)Ds(Lu)}function Ds(e){var t=Wu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?As(e):Lu=t,Au.current=null}function As(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Lu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Lu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Lu=t);Lu=t=e}while(null!==t);0===Vu&&(Vu=5)}function Os(e){var t=Ki();return Qi(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Rs()}while(null!==es);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Lu=Pu=null,Ru=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ou,Ou|=32,Au.current=null,Ur=$t,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(_){s=null;break e}var f=0,h=-1,d=-1,v=0,p=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++v===a&&(h=f),m===c&&++p===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},$t=!1,ls=null,fs=!1,$u=r;do{try{Ls()}catch(_){if(null===$u)throw Error(o(330));Bs($u,_),$u=$u.nextEffect}}while(null!==$u);ls=null,$u=r;do{try{for(u=e;null!==$u;){var k=$u.flags;if(16&k&&ge($u.stateNode,""),128&k){var w=$u.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu($u),$u.flags&=-3;break;case 6:xu($u),$u.flags&=-3,_u($u.alternate,$u);break;case 1024:$u.flags&=-1025;break;case 1028:$u.flags&=-1025,_u($u.alternate,$u);break;case 4:_u($u.alternate,$u);break;case 8:Iu(u,s=$u);var x=s.alternate;wu(s),null!==x&&wu(x)}$u=$u.nextEffect}}catch(_){if(null===$u)throw Error(o(330));Bs($u,_),$u=$u.nextEffect}}while(null!==$u);if(b=qr,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&pr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=vr(k,x),a=vr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}$t=!!Ur,qr=Ur=null,e.current=n,$u=r;do{try{for(k=e;null!==$u;){var E=$u.flags;if(36&E&&mu(k,$u.alternate,$u),128&E){w=void 0;var S=$u.ref;if(null!==S){var I=$u.stateNode;$u.tag,w=I,"function"===typeof S?S(w):S.current=w}}$u=$u.nextEffect}}catch(_){if(null===$u)throw Error(o(330));Bs($u,_),$u=$u.nextEffect}}while(null!==$u);$u=null,Vi(),Ou=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for($u=r;null!==$u;)t=$u.nextEffect,$u.nextEffect=null,8&$u.flags&&((E=$u).sibling=null,E.stateNode=null),$u=t;if(0===(r=e.pendingLanes)&&(Ju=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Si&&"function"===typeof Si.onCommitFiberRoot)try{Si.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(_){}if(ys(e,zi()),Yu)throw Yu=!1,e=Xu,Xu=null,e;return 0!==(8&Ou)||Wi(),null}function Ls(){for(;null!==$u;){var e=$u.alternate;fs||null===ls||(0!==(8&$u.flags)?et($u,ls)&&(fs=!0):13===$u.tag&&Cu(e,$u)&&et($u,ls)&&(fs=!0));var t=$u.flags;0!==(256&t)&&yu(e,$u),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Rs(),null}))),$u=$u.nextEffect}}function Rs(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Qi(e,Vs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Rs(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Rs(),null})))}function Vs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ou))throw Error(o(331));var t=Ou;Ou|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Bs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Bs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ou=t,Wi(),!0}function js(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=ps(e,1))&&(zt(e,1,t),ys(e,t))}function Bs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=ps(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Us(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Ru&n)===n&&(4===Vu||3===Vu&&(62914560&Ru)===Ru&&500>zi()-Gu?Ss(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=Bu),0===(t=Ut(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=ps(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Qs(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case S:return Ws(n.children,i,a,t);case M:u=8,i|=16;break;case I:u=8,i|=1;break;case _:return(e=Ks(12,n,t,8|i)).elementType=_,e.type=_,e.lanes=a,e;case D:return(e=Ks(13,n,t,i)).type=D,e.elementType=D,e.lanes=a,e;case A:return(e=Ks(19,n,t,i)).elementType=A,e.lanes=a,e;case F:return $s(n,i,a,t);case V:return(e=Ks(24,n,t,i)).elementType=V,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case N:u=11;break e;case O:u=14;break e;case P:u=16,r=null;break e;case L:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ws(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function $s(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function Ys(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Js(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),vs(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Js(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Wu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||vi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:Ra(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Qo(null,t,r,!0,a,n)}else t.tag=0,Vo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Go(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Bo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ba=Wr(t.stateNode.containerInfo.firstChild),ja=t,a=Ua=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Wa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Vo(e,t,r,n),Ha();t=t.child}return t;case 5:return Ra(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Vo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Jo(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_a(t,null,r,n):Vo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Ji,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!vi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Vo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Vo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Bo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Uo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Qo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(vs(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(vs(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);vs(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=ws,Le=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&(Hu(),Wi())}},Re=function(){0===(49&Ou)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Wi()}(),Rs())},Me=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Wi())}};var sc={Events:[ri,ii,ai,Ae,Oe,Rs,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Ei=fc.inject(lc),Si=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ou;if(0!==(48&n))return e(t);Ou|=1;try{if(e)return Qi(99,e.bind(null,t))}finally{Ou=n,Wi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p={};function y(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||v}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+_(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+_(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+_(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var D={current:null};function A(){var e=D.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var p=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(p=!1,y=null)}catch(n){throw b.postMessage(null),n}}else p=!1},n=function(e){y=e,p||(p=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>I(o,n))void 0!==s&&0>I(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>I(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var _=[],T=[],C=1,N=null,D=3,A=!1,O=!1,P=!1;function L(e){for(var t=E(T);null!==t;){if(null===t.callback)S(T);else{if(!(t.startTime<=e))break;S(T),t.sortIndex=t.expirationTime,x(_,t)}t=E(T)}}function R(e){if(P=!1,L(e),!O)if(null!==E(_))O=!0,n(M);else{var t=E(T);null!==t&&r(R,t.startTime-e)}}function M(e,n){O=!1,P&&(P=!1,i()),A=!0;var a=D;try{for(L(n),N=E(_);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,D=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===E(_)&&S(_),L(n)}else S(_);N=E(_)}if(null!==N)var s=!0;else{var c=E(T);null!==c&&r(R,c.startTime-n),s=!1}return s}finally{N=null,D=a,A=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||A||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return E(_)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===E(_)&&e===E(T)&&(P?i():P=!0,r(R,o-u))):(e.sortIndex=s,x(_,e),O||A||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/react-cooking-recipes/",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ce},SDK_VERSION:function(){return Mt},_DEFAULT_ENTRY_NAME:function(){return Et},_addComponent:function(){return Tt},_addOrOverwriteComponent:function(){return Ct},_apps:function(){return It},_clearComponents:function(){return Ot},_components:function(){return _t},_getProvider:function(){return Dt},_registerComponent:function(){return Nt},_removeServiceInstance:function(){return At},deleteApp:function(){return Bt},getApp:function(){return Vt},getApps:function(){return jt},initializeApp:function(){return Ft},onLog:function(){return zt},registerVersion:function(){return qt},setLogLevel:function(){return Kt}});var t,r=n(791),i=n(164);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var c=function(e){return e};var l="beforeunload",f="popstate";function h(e){e.preventDefault(),e.returnValue=""}function d(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function v(){return Math.random().toString(36).substr(2,8)}function p(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function y(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var m=(0,r.createContext)(null);var g=(0,r.createContext)(null);var k=(0,r.createContext)({outlet:null,matches:[]});function w(e,t){if(!e)throw new Error(t)}function b(e,t,n){void 0===n&&(n="/");var r=N(("string"===typeof t?y(t):t).pathname||"/",n);if(null==r)return null;var i=x(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=_(i[o],r);return a}function x(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||w(!1),a.relativePath=a.relativePath.slice(r.length));var o=D([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&w(!1),x(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:u})})),t}var E=/^:\w+$/,S=function(e){return"*"===e};function I(e,t){var n=e.split("/"),r=n.length;return n.some(S)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!S(e)})).reduce((function(e,t){return e+(E.test(t)?3:""===t?1:10)}),r)}function _(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=T({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:D([i,l.pathname]),pathnameBase:A(D([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=D([i,l.pathnameBase]))}return a}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],c=s.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:s,pathnameBase:c,pattern:e}}function C(e,t,n){var r,i="string"===typeof e?y(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?y(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:O(a),hash:P(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var D=function(e){return e.join("/").replace(/\/\/+/g,"/")},A=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},P=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function L(e){R()||w(!1);var t=(0,r.useContext)(m),n=t.basename,i=t.navigator,a=V(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?y(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):D([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function R(){return null!=(0,r.useContext)(g)}function M(){return R()||w(!1),(0,r.useContext)(g).location}function F(){R()||w(!1);var e=(0,r.useContext)(m),t=e.basename,n=e.navigator,i=(0,r.useContext)(k).matches,a=M().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=C(e,JSON.parse(o),a);"/"!==t&&(i.pathname=D([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function V(e){var t=(0,r.useContext)(k).matches,n=M().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return C(e,JSON.parse(i),n)}),[e,i,n])}function j(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(k.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function B(e){w(!1)}function U(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;R()&&w(!1);var d=A(i),v=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=y(u));var p=u,k=p.pathname,b=void 0===k?"/":k,x=p.search,E=void 0===x?"":x,S=p.hash,I=void 0===S?"":S,_=p.state,T=void 0===_?null:_,C=p.key,D=void 0===C?"default":C,O=(0,r.useMemo)((function(){var e=N(b,d);return null==e?null:{pathname:e,search:E,hash:I,state:T,key:D}}),[d,b,E,I,T,D]);return null==O?null:(0,r.createElement)(m.Provider,{value:v},(0,r.createElement)(g.Provider,{children:o,value:{location:O,navigationType:c}}))}function q(e){var t=e.children,n=e.location;return function(e,t){R()||w(!1);var n,i=(0,r.useContext)(k).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,M());if(t){var c,l="string"===typeof t?y(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||w(!1),n=l}else n=s;var f=n.pathname||"/",h=b(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return j(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:D([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,e.pathnameBase])})})),i)}(z(t),n)}function z(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==B&&w(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=z(e.props.children)),t.push(n)}else t.push.apply(t,z(e.props.children))})),t}function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function H(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,c({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(f,(function(){if(o)b.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(b.length){if(null!=r){var u=g-r;u&&(o={action:e,location:i,retry:function(){T(-1*u)}},T(u))}}else _(e)}}));var u=t.Pop,m=a(),g=m[0],k=m[1],w=d(),b=d();function x(e){return"string"===typeof e?e:p(e)}function E(e,t){return void 0===t&&(t=null),c(s({pathname:k.pathname,hash:"",search:""},"string"===typeof e?y(e):e,{state:t,key:v()}))}function S(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function I(e,t,n){return!b.length||(b.call({action:e,location:t,retry:n}),!1)}function _(e){u=e;var t=a();g=t[0],k=t[1],w.call({action:u,location:k})}function T(e){i.go(e)}null==g&&(g=0,i.replaceState(s({},i.state,{idx:g}),""));var C={get action(){return u},get location(){return k},createHref:x,push:function e(n,a){var o=t.Push,u=E(n,a);if(I(o,u,(function(){e(n,a)}))){var s=S(u,g+1),c=s[0],l=s[1];try{i.pushState(c,"",l)}catch(f){r.location.assign(l)}_(o)}},replace:function e(n,r){var a=t.Replace,o=E(n,r);if(I(a,o,(function(){e(n,r)}))){var u=S(o,g),s=u[0],c=u[1];i.replaceState(s,"",c),_(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return w.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&r.addEventListener(l,h),function(){t(),b.length||r.removeEventListener(l,h)}}};return C}({window:a}));var m=o.current,g=u((0,r.useState)({action:m.action,location:m.location}),2),k=g[0],w=g[1];return(0,r.useLayoutEffect)((function(){return m.listen(w)}),[m]),(0,r.createElement)(U,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:m})}var W=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=G(e,Q),f=L(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=F(),s=M(),c=V(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||p(s)===p(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",K({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=n(184),Z=(0,r.createContext)(),ee=function(e,t){switch(t.type){case"CHANGE_COLOR":return X(X({},e),{},{color:t.payload});case"CHANGE_MODE":return X(X({},e),{},{mode:t.payload});default:return e}};function te(e){var t=e.children,n=u((0,r.useReducer)(ee,{color:"#58249c",mode:"dark"}),2),i=n[0],a=n[1];return(0,J.jsx)(Z.Provider,{value:X(X({},i),{},{changeColor:function(e){a({type:"CHANGE_COLOR",payload:e})},changeMode:function(e){a({type:"CHANGE_MODE",payload:e})}}),children:t})}var ne=function(){var e=(0,r.useContext)(Z);if(void 0===e)throw new Error("useTheme() must be used inside a ThemeProvider");return e};function re(){var e=u((0,r.useState)(""),2),t=e[0],n=e[1],i=F();return(0,J.jsx)("div",{className:"searchbar",children:(0,J.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i.push("/search?q=".concat(t))},children:[(0,J.jsx)("label",{htmlFor:"search",children:"Search:"}),(0,J.jsx)("input",{type:"text",id:"search",onChange:function(e){return n(e.target.value)},required:!0})]})})}function ie(){var e=ne().color;return(0,J.jsx)("div",{className:"navbar",style:{background:e},children:(0,J.jsxs)("nav",{children:[(0,J.jsx)(W,{to:"/",className:"brand",children:(0,J.jsx)("h1",{children:"React Cooking Recipes"})}),(0,J.jsx)(re,{}),(0,J.jsx)(W,{to:"/create",children:"Create Recipe"})]})})}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function se(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}function fe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}function de(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function pe(e,t){if(t&&("object"===ve(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ye(e){var t=de();return function(){var n,r=he(e);if(t){var i=he(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe(this,n)}}function me(e,t,n){return me=de()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&le(i,n.prototype),i},me.apply(null,arguments)}function ge(e){var t="function"===typeof Map?new Map:void 0;return ge=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return me(e,arguments,he(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),le(n,e)},ge(e)}var ke=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ke(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},be=function(e){return function(e){var t=ke(e);return we.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function xe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=xe(e[n],t[n]));return e}var Ee=function(){function e(){var t=this;ae(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ue(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Se(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(a)),""].join(".")}function Ie(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function _e(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Te(){return"object"===typeof indexedDB}var Ce=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(ce(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ce(a),Ne.prototype.create),a}return ue(n)}(ge(Error)),Ne=function(){function e(t,n,r){ae(this,e),this.service=t,this.serviceName=n,this.errors=r}return ue(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?De(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ce(n,a,t);return o}}]),e}();function De(e,t){return e.replace(Ae,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ae=/\{\$([^}]+)}/g;function Oe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Le(u)&&Le(s)){if(!Pe(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Le(e){return null!==e&&"object"===typeof e}function Re(e,t){var n=new Me(e,t);return n.subscribe.bind(n)}var Me=function(){function e(t,n){var r=this;ae(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ue(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=se(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Fe),void 0===r.error&&(r.error=Fe),void 0===r.complete&&(r.complete=Fe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Fe(){}function Ve(e){return e&&e._delegate?e._delegate:e}function je(){je=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(_){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new E(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(S([])));y&&y!==t&&n.call(y,i)&&(v=y);var m=d.prototype=f.prototype=Object.create(v);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==ve(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Be(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ue(a,r,i,o,u,"next",e)}function u(e){Ue(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ze=function(){function e(t,n,r){ae(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ue(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ke="[DEFAULT]",Ge=function(){function e(t,n){ae(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ue(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ee;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ke})}catch(c){}var t,n=se(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=qe(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Be(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Be(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=se(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Fy){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ke?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Fy){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;return this.component?this.component.multipleInstances?e:Ke:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Qe,He,We=function(){function e(t){ae(this,e),this.name=t,this.providers=new Map}return ue(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ge(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),$e=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(He||(He={}));var Ye={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Xe=He.INFO,Je=($(Qe={},He.DEBUG,"log"),$(Qe,He.VERBOSE,"log"),$(Qe,He.INFO,"info"),$(Qe,He.WARN,"warn"),$(Qe,He.ERROR,"error"),Qe),Ze=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Je[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},et=function(){function e(t){ae(this,e),this.name=t,this._logLevel=Xe,this._logHandler=Ze,this._userLogHandler=null,$e.push(this)}return ue(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in He))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ye[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,He.DEBUG].concat(t)),this._logHandler.apply(this,[this,He.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,He.VERBOSE].concat(t)),this._logHandler.apply(this,[this,He.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,He.INFO].concat(t)),this._logHandler.apply(this,[this,He.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,He.WARN].concat(t)),this._logHandler.apply(this,[this,He.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,He.ERROR].concat(t)),this._logHandler.apply(this,[this,He.ERROR].concat(t))}}]),e}();var tt,nt;var rt=new WeakMap,it=new WeakMap,at=new WeakMap,ot=new WeakMap,ut=new WeakMap;var st={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return it.get(e);if("objectStoreNames"===t)return e.objectStoreNames||at.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ft(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ct(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(nt||(nt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ht(this),n),ft(rt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ft(e.apply(ht(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ht(this),t].concat(r));return at.set(a,t.sort?t.sort():[t]),ft(a)}}function lt(e){return"function"===typeof e?ct(e):(e instanceof IDBTransaction&&function(e){if(!it.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));it.set(e,t)}}(e),t=e,(tt||(tt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,st):e);var t}function ft(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ft(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&rt.set(t,e)})).catch((function(){})),ut.set(t,e),t}(e);if(ot.has(e))return ot.get(e);var t=lt(e);return t!==e&&(ot.set(e,t),ut.set(t,e)),t}var ht=function(e){return ut.get(e)};var dt,vt,pt=["get","getKey","getAll","getAllKeys","count"],yt=["put","add","delete","clear"],mt=new Map;function gt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(mt.get(t))return mt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=yt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||pt.includes(n))){var a=function(){var e=qe(je().mark((function e(t){var a,o,u,s,c,l,f=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return mt.set(t,a),a}}}st=function(e){return X(X({},e),{},{get:function(t,n,r){return gt(t,n)||e.get(t,n,r)},has:function(t,n){return!!gt(t,n)||e.has(t,n)}})}(st);var kt=function(){function e(t){ae(this,e),this.container=t}return ue(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var wt="@firebase/app",bt="0.7.27",xt=new et("@firebase/app"),Et="[DEFAULT]",St=($(dt={},wt,"fire-core"),$(dt,"@firebase/app-compat","fire-core-compat"),$(dt,"@firebase/analytics","fire-analytics"),$(dt,"@firebase/analytics-compat","fire-analytics-compat"),$(dt,"@firebase/app-check","fire-app-check"),$(dt,"@firebase/app-check-compat","fire-app-check-compat"),$(dt,"@firebase/auth","fire-auth"),$(dt,"@firebase/auth-compat","fire-auth-compat"),$(dt,"@firebase/database","fire-rtdb"),$(dt,"@firebase/database-compat","fire-rtdb-compat"),$(dt,"@firebase/functions","fire-fn"),$(dt,"@firebase/functions-compat","fire-fn-compat"),$(dt,"@firebase/installations","fire-iid"),$(dt,"@firebase/installations-compat","fire-iid-compat"),$(dt,"@firebase/messaging","fire-fcm"),$(dt,"@firebase/messaging-compat","fire-fcm-compat"),$(dt,"@firebase/performance","fire-perf"),$(dt,"@firebase/performance-compat","fire-perf-compat"),$(dt,"@firebase/remote-config","fire-rc"),$(dt,"@firebase/remote-config-compat","fire-rc-compat"),$(dt,"@firebase/storage","fire-gcs"),$(dt,"@firebase/storage-compat","fire-gcs-compat"),$(dt,"@firebase/firestore","fire-fst"),$(dt,"@firebase/firestore-compat","fire-fst-compat"),$(dt,"fire-js","fire-js"),$(dt,"firebase","fire-js-all"),dt),It=new Map,_t=new Map;function Tt(e,t){try{e.container.addComponent(t)}catch(n){xt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ct(e,t){e.container.addOrOverwriteComponent(t)}function Nt(e){var t=e.name;if(_t.has(t))return xt.debug("There were multiple attempts to register component ".concat(t,".")),!1;_t.set(t,e);var n,r=se(It.values());try{for(r.s();!(n=r.n()).done;){Tt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Dt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function At(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Et;Dt(e,t).clearInstance(n)}function Ot(){_t.clear()}var Pt=($(vt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),$(vt,"bad-app-name","Illegal App name: '{$appName}"),$(vt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),$(vt,"app-deleted","Firebase App named '{$appName}' already deleted"),$(vt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$(vt,"invalid-log-argument","First argument to `onLog` must be null or a function."),$(vt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),$(vt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),$(vt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),$(vt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),vt),Lt=new Ne("app","Firebase",Pt),Rt=function(){function e(t,n,r){var i=this;ae(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ze("app",(function(){return i}),"PUBLIC"))}return ue(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}}]),e}(),Mt="9.8.4";function Ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Et,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Lt.create("bad-app-name",{appName:String(i)});var a=It.get(i);if(a){if(Pe(e,a.options)&&Pe(r,a.config))return a;throw Lt.create("duplicate-app",{appName:i})}var o,u=new We(i),s=se(_t.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Rt(e,r,u);return It.set(i,l),l}function Vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=It.get(e);if(!t)throw Lt.create("no-app",{appName:e});return t}function jt(){return Array.from(It.values())}function Bt(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=qe(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!It.has(n)){e.next=6;break}return It.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e,t,n){var r,i=null!==(r=St[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void xt.warn(u.join(" "))}Nt(new ze("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function zt(e,t){if(null!==e&&"function"!==typeof e)throw Lt.create("invalid-log-argument");!function(e,t){var n,r=se($e);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ye[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:He[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Kt(e){var t;t=e,$e.forEach((function(e){e.setLogLevel(t)}))}var Gt="firebase-heartbeat-store",Qt=null;function Ht(){return Qt||(Qt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ft(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ft(u.result),e.oldVersion,e.newVersion,ft(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Gt)}}).catch((function(e){throw Lt.create("storage-open",{originalErrorMessage:e.message})}))),Qt}function Wt(e){return $t.apply(this,arguments)}function $t(){return $t=qe(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ht();case 3:return r=e.sent,e.abrupt("return",r.transaction(Gt).objectStore(Gt).get(Jt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Lt.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),$t.apply(this,arguments)}function Yt(e,t){return Xt.apply(this,arguments)}function Xt(){return Xt=qe(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ht();case 3:return i=e.sent,a=i.transaction(Gt,"readwrite"),o=a.objectStore(Gt),e.next=8,o.put(n,Jt(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Lt.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Xt.apply(this,arguments)}function Jt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Zt=function(){function e(t){var n=this;ae(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new an(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ue(e,[{key:"triggerHeartbeat",value:function(){var e=qe(je().mark((function e(){var t,n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=en(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=qe(je().mark((function e(){var t,n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=en(),n=tn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=be(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function en(){return(new Date).toISOString().substring(0,10)}function tn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=se(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),on(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),on(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var nn,rn,an=function(){function e(t){ae(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ue(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=qe(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Wt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=qe(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Yt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=qe(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Yt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Be(r.heartbeats),Be(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function on(e){return be(JSON.stringify({version:2,heartbeats:e})).length}nn="",Nt(new ze("platform-logger",(function(e){return new kt(e)}),"PRIVATE")),Nt(new ze("heartbeat",(function(e){return new Zt(e)}),"PRIVATE")),qt(wt,bt,nn),qt(wt,bt,"esm2017"),qt("fire-js","");var un=function(){function e(t,n){var r=this;ae(this,e),this._delegate=t,this.firebase=n,Tt(t,new ze("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ue(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Bt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Tt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ct(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),sn=($(rn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),$(rn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),rn),cn=new Ne("app-compat","Firebase",sn);var ln=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ft(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Oe(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:qt,setLogLevel:Kt,onLog:zt,apps:null,SDK_VERSION:Mt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Nt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw cn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&xe(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Oe(n,e=e||Et))throw cn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(un);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){xe(n,e)},createSubscribe:Re,ErrorFactory:Ne,deepExtend:xe}),n}(),fn=new et("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){fn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var hn=self.firebase.SDK_VERSION;hn&&hn.indexOf("LITE")>=0&&fn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var dn=ln;!function(e){qt("@firebase/app-compat","0.1.28",e)}();function vn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}function pn(){return pn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=vn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},pn.apply(this,arguments)}dn.registerVersion("firebase","9.8.4","app-compat");var yn,mn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},gn={},kn=kn||{},wn=mn||self;function bn(){}function xn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function En(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Sn="closure_uid_"+(1e9*Math.random()>>>0),In=0;function _n(e,t,n){return e.call.apply(e.bind,arguments)}function Tn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Cn(e,t,n){return(Cn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_n:Tn).apply(null,arguments)}function Nn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Dn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function An(){this.s=this.s,this.o=this.o}var On={};An.prototype.s=!1,An.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Sn)&&e[Sn]||(e[Sn]=++In)}(this);delete On[e]}},An.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Pn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ln=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Rn(e){return Array.prototype.concat.apply([],arguments)}function Mn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Fn(e){return/^[\s\xa0]*$/.test(e)}var Vn,jn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Bn(e,t){return-1!=e.indexOf(t)}function Un(e,t){return e<t?-1:e>t?1:0}e:{var qn=wn.navigator;if(qn){var zn=qn.userAgent;if(zn){Vn=zn;break e}}Vn=""}function Kn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Gn(e){var t={};for(var n in e)t[n]=e[n];return t}var Qn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Qn.length;a++)n=Qn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Wn(e){return Wn[" "](e),e}Wn[" "]=bn;var $n,Yn=Bn(Vn,"Opera"),Xn=Bn(Vn,"Trident")||Bn(Vn,"MSIE"),Jn=Bn(Vn,"Edge"),Zn=Jn||Xn,er=Bn(Vn,"Gecko")&&!(Bn(Vn.toLowerCase(),"webkit")&&!Bn(Vn,"Edge"))&&!(Bn(Vn,"Trident")||Bn(Vn,"MSIE"))&&!Bn(Vn,"Edge"),tr=Bn(Vn.toLowerCase(),"webkit")&&!Bn(Vn,"Edge");function nr(){var e=wn.document;return e?e.documentMode:void 0}e:{var rr="",ir=function(){var e=Vn;return er?/rv:([^\);]+)(\)|;)/.exec(e):Jn?/Edge\/([\d\.]+)/.exec(e):Xn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):tr?/WebKit\/(\S+)/.exec(e):Yn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ir&&(rr=ir?ir[1]:""),Xn){var ar=nr();if(null!=ar&&ar>parseFloat(rr)){$n=String(ar);break e}}$n=rr}var or,ur={};function sr(){return function(e){var t=ur;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=jn(String($n)).split("."),n=jn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Un(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Un(0==a[2].length,0==o[2].length)||Un(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(wn.document&&Xn){var cr=nr();or=cr||(parseInt($n,10)||void 0)}else or=void 0;var lr=or,fr=function(){if(!wn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{wn.addEventListener("test",bn,t),wn.removeEventListener("test",bn,t)}catch(n){}return e}();function hr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function dr(e,t){if(hr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(er){e:{try{Wn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:vr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&dr.Z.h.call(this)}}hr.prototype.h=function(){this.defaultPrevented=!0},Dn(dr,hr);var vr={2:"touch",3:"pen",4:"mouse"};dr.prototype.h=function(){dr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var pr="closure_listenable_"+(1e6*Math.random()|0),yr=0;function mr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++yr,this.ca=this.fa=!1}function gr(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function kr(e){this.src=e,this.g={},this.h=0}function wr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Pn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(gr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function br(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}kr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=br(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new mr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var xr="closure_lm_"+(1e6*Math.random()|0),Er={};function Sr(e,t,n,r,i){if(r&&r.once)return _r(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Sr(e,t[a],n,r,i);return null}return n=Pr(n),e&&e[pr]?e.N(t,n,En(r)?!!r.capture:!!r,i):Ir(e,t,n,!1,r,i)}function Ir(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=En(i)?!!i.capture:!!i,u=Ar(e);if(u||(e[xr]=u=new kr(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Dr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)fr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Nr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function _r(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)_r(e,t[a],n,r,i);return null}return n=Pr(n),e&&e[pr]?e.O(t,n,En(r)?!!r.capture:!!r,i):Ir(e,t,n,!0,r,i)}function Tr(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Tr(e,t[a],n,r,i);else r=En(r)?!!r.capture:!!r,n=Pr(n),e&&e[pr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=br(a=e.g[t],n,r,i))&&(gr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ar(e))&&(t=e.g[t.toString()],e=-1,t&&(e=br(t,n,r,i)),(n=-1<e?t[e]:null)&&Cr(n))}function Cr(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[pr])wr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Nr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ar(t))?(wr(n,e),0==n.h&&(n.src=null,t[xr]=null)):gr(e)}}}function Nr(e){return e in Er?Er[e]:Er[e]="on"+e}function Dr(e,t){if(e.ca)e=!0;else{t=new dr(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Cr(e),e=n.call(r,t)}return e}function Ar(e){return(e=e[xr])instanceof kr?e:null}var Or="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pr(e){return"function"===typeof e?e:(e[Or]||(e[Or]=function(t){return e.handleEvent(t)}),e[Or])}function Lr(){An.call(this),this.i=new kr(this),this.P=this,this.I=null}function Rr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new hr(t,e);else if(t instanceof hr)t.target=t.target||e;else{var i=t;Hn(t=new hr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Mr(o,r,!0,t)&&i}if(i=Mr(o=t.g=e,r,!0,t)&&i,i=Mr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Mr(o=t.g=n[a],r,!1,t)&&i}function Mr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&wr(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Dn(Lr,An),Lr.prototype[pr]=!0,Lr.prototype.removeEventListener=function(e,t,n,r){Tr(this,e,t,n,r)},Lr.prototype.M=function(){if(Lr.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gr(n[r]);delete t.g[e],t.h--}}this.I=null},Lr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Lr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Fr=wn.JSON.stringify;function Vr(){var e=Qr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var jr,Br=function(){function e(){ae(this,e),this.h=this.g=null}return ue(e,[{key:"add",value:function(e,t){var n=Ur.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ur=new(function(){function e(t,n){ae(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ue(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new qr}),(function(e){return e.reset()})),qr=function(){function e(){ae(this,e),this.next=this.g=this.h=null}return ue(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function zr(e){wn.setTimeout((function(){throw e}),0)}function Kr(e,t){jr||function(){var e=wn.Promise.resolve(void 0);jr=function(){e.then(Hr)}}(),Gr||(jr(),Gr=!0),Qr.add(e,t)}var Gr=!1,Qr=new Br;function Hr(){for(var e;e=Vr();){try{e.h.call(e.g)}catch(n){zr(n)}var t=Ur;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Gr=!1}function Wr(e,t){Lr.call(this),this.h=e||1,this.g=t||wn,this.j=Cn(this.kb,this),this.l=Date.now()}function $r(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Yr(e,t,n){if("function"===typeof e)n&&(e=Cn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Cn(e.handleEvent,e)}return 2147483647<Number(t)?-1:wn.setTimeout(e,t||0)}function Xr(e){e.g=Yr((function(){e.g=null,e.i&&(e.i=!1,Xr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Dn(Wr,Lr),(yn=Wr.prototype).da=!1,yn.S=null,yn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rr(this,"tick"),this.da&&($r(this),this.start()))}},yn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yn.M=function(){Wr.Z.M.call(this),$r(this),delete this.g};var Jr=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ue(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Xr(this)}},{key:"M",value:function(){pn(he(n.prototype),"M",this).call(this),this.g&&(wn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(An);function Zr(e){An.call(this),this.h=e,this.g={}}Dn(Zr,An);var ei=[];function ti(e,t,n,r){Array.isArray(n)||(n&&(ei[0]=n.toString()),n=ei);for(var i=0;i<n.length;i++){var a=Sr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ni(e){Kn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Cr(e)}),e),e.g={}}function ri(){this.g=!0}function ii(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Fr(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Zr.prototype.M=function(){Zr.Z.M.call(this),ni(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ri.prototype.Aa=function(){this.g=!1},ri.prototype.info=function(){};var ai={},oi=null;function ui(){return oi=oi||new Lr}function si(e){hr.call(this,ai.Ma,e)}function ci(e){var t=ui();Rr(t,new si(t,e))}function li(e,t){hr.call(this,ai.STAT_EVENT,e),this.stat=t}function fi(e){var t=ui();Rr(t,new li(t,e))}function hi(e,t){hr.call(this,ai.Na,e),this.size=t}function di(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return wn.setTimeout((function(){e()}),t)}ai.Ma="serverreachability",Dn(si,hr),ai.STAT_EVENT="statevent",Dn(li,hr),ai.Na="timingevent",Dn(hi,hr);var vi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yi(){}function mi(e){return e.h||(e.h=e.i())}function gi(){}yi.prototype.h=null;var ki,wi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bi(){hr.call(this,"d")}function xi(){hr.call(this,"c")}function Ei(){}function Si(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Zr(this),this.P=_i,e=Zn?125:void 0,this.W=new Wr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}Dn(bi,hr),Dn(xi,hr),Dn(Ei,yi),Ei.prototype.g=function(){return new XMLHttpRequest},Ei.prototype.i=function(){return{}},ki=new Ei;var _i=45e3,Ti={},Ci={};function Ni(e,t,n){e.K=1,e.v=Ji(Qi(t)),e.s=n,e.U=!0,Di(e,null)}function Di(e,t){e.F=Date.now(),Li(e),e.A=Qi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),fa(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ii,e.g=vo(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Jr(Cn(e.Ia,e,e.g),e.O)),ti(e.V,e.g,"readystatechange",e.gb),t=e.H?Gn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ci(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Ai(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Oi(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Pi(e,n))==Ci){4==t&&(e.o=4,fi(14),i=!1),ii(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ti){e.o=4,fi(15),ii(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ii(e.j,e.m,r,null),ji(e,r)}Ai(e)&&r!=Ci&&r!=Ti&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,fi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ao(t),t.L=!0,fi(11))):(ii(e.j,e.m,n,"[Invalid Chunked Response]"),Vi(e),Fi(e))}function Pi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ci:(n=Number(t.substring(n,r)),isNaN(n)?Ti:(r+=1)+n>t.length?Ci:(t=t.substr(r,n),e.C=r+n,t))}function Li(e){e.Y=Date.now()+e.P,Ri(e,e.P)}function Ri(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=di(Cn(e.eb,e),t)}function Mi(e){e.B&&(wn.clearTimeout(e.B),e.B=null)}function Fi(e){0==e.l.G||e.I||so(e.l,e)}function Vi(e){Mi(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,$r(e.W),ni(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ji(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ka(n.i,e)))if(n.I=e.N,!e.J&&ka(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;uo(n),Ya(n)}io(n),fi(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=di(Cn(n.ab,n),6e3));if(1>=ga(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else lo(n,11)}else if((e.J||n.g==e)&&uo(n),!Fn(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Bn(l,"spdy")||Bn(l,"quic")||Bn(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(wa(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Xi(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=ho(r,r.H?r.la:null,r.W),d.J){ba(r.i,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(Mi(v),Li(v)),r.g=d}else ro(r);0<n.l.length&&Za(n)}else"stop"!=a[0]&&"close"!=a[0]||lo(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?lo(n,7):$a(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}ci(4)}catch(a){}}function Bi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xn(e)||"string"===typeof e)Ln(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(xn(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(xn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Ui(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ui)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function qi(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];zi(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)zi(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function zi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(yn=Si.prototype).setTimeout=function(e){this.P=e},yn.gb=function(e){e=e.target;var t=this.L;t&&3==Ka(e)?t.l():this.Ia(e)},yn.Ia=function(e){try{if(e==this.g)e:{var t=Ka(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Zn||this.g&&(this.h.h||this.g.ga()||Ga(this.g)))){this.I||4!=t||7==n||ci(8==n||0>=r?3:2),Mi(this);var i=this.g.ba();this.N=i;t:if(Ai(this)){var a=Ga(this.g);e="";var o=a.length,u=4==Ka(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Vi(this),Fi(this);var s="";break t}this.h.i=new wn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fn(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,fi(12),Vi(this),Fi(this);break e}ii(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ji(this,i)}this.U?(Oi(this,t,s),Zn&&this.i&&3==t&&(ti(this.V,this.W,"tick",this.fb),this.W.start())):(ii(this.j,this.m,s,null),ji(this,s)),4==t&&Vi(this),this.i&&!this.I&&(4==t?so(this.l,this):(this.i=!1,Li(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,fi(12)):(this.o=0,fi(13)),Vi(this),Fi(this)}}}catch(t){}},yn.fb=function(){if(this.g){var e=Ka(this.g),t=this.g.ga();this.C<t.length&&(Mi(this),Oi(this,e,t),this.i&&4!=e&&Li(this))}},yn.cancel=function(){this.I=!0,Vi(this)},yn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ci(3),fi(17)),Vi(this),this.o=2,Fi(this)):Ri(this,this.Y-e)},(yn=Ui.prototype).R=function(){qi(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},yn.T=function(){return qi(this),this.g.concat()},yn.get=function(e,t){return zi(this.h,e)?this.h[e]:t},yn.set=function(e,t){zi(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},yn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Ki=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gi(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Gi){this.g=void 0!==t?t:e.g,Hi(this,e.j),this.s=e.s,Wi(this,e.i),$i(this,e.m),this.l=e.l,t=e.h;var n=new ua;n.i=t.i,t.g&&(n.g=new Ui(t.g),n.h=t.h),Yi(this,n),this.o=e.o}else e&&(n=String(e).match(Ki))?(this.g=!!t,Hi(this,n[1]||"",!0),this.s=Zi(n[2]||""),Wi(this,n[3]||"",!0),$i(this,n[4]),this.l=Zi(n[5]||"",!0),Yi(this,n[6]||"",!0),this.o=Zi(n[7]||"")):(this.g=!!t,this.h=new ua(null,this.g))}function Qi(e){return new Gi(e)}function Hi(e,t,n){e.j=n?Zi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Wi(e,t,n){e.i=n?Zi(t,!0):t}function $i(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Yi(e,t,n){t instanceof ua?(e.h=t,function(e,t){t&&!e.j&&(sa(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ca(this,t),fa(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ea(t,aa)),e.h=new ua(t,e.g))}function Xi(e,t,n){e.h.set(t,n)}function Ji(e){return Xi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ea(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ta),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ta(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Gi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ea(t,na,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ea(t,na,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ea(n,"/"==n.charAt(0)?ia:ra,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ea(n,oa)),e.join("")};var na=/[#\/\?@]/g,ra=/[#\?:]/g,ia=/[#\?]/g,aa=/[#\?@]/g,oa=/#/g;function ua(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function sa(e){e.g||(e.g=new Ui,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ca(e,t){sa(e),t=ha(e,t),zi(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,zi((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&qi(e)))}function la(e,t){return sa(e),t=ha(e,t),zi(e.g.h,t)}function fa(e,t,n){ca(e,t),0<n.length&&(e.i=null,e.g.set(ha(e,t),Mn(n)),e.h+=n.length)}function ha(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(yn=ua.prototype).add=function(e,t){sa(this),this.i=null,e=ha(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},yn.forEach=function(e,t){sa(this),this.g.forEach((function(n,r){Ln(n,(function(n){e.call(t,n,r,this)}),this)}),this)},yn.T=function(){sa(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},yn.R=function(e){sa(this);var t=[];if("string"===typeof e)la(this,e)&&(t=Rn(t,this.g.get(ha(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Rn(t,e[n])}return t},yn.set=function(e,t){return sa(this),this.i=null,la(this,e=ha(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},yn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},yn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var da=ue((function e(t,n){ae(this,e),this.h=t,this.g=n}));function va(e){this.l=e||ya,wn.PerformanceNavigationTiming?e=0<(e=wn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(wn.g&&wn.g.Ea&&wn.g.Ea()&&wn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pa,ya=10;function ma(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ga(e){return e.h?1:e.g?e.g.size:0}function ka(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function wa(e,t){e.g?e.g.add(t):e.h=t}function ba(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function xa(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=se(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Mn(e.i)}function Ea(){}function Sa(){this.g=new Ea}function Ia(e,t,n){var r=n||"";try{Bi(e,(function(e,n){var i=e;En(e)&&(i=Fr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function _a(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ta(e){this.l=e.$b||null,this.j=e.ib||!1}function Ca(e,t){Lr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Na,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}va.prototype.cancel=function(){if(this.i=xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=se(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ea.prototype.stringify=function(e){return wn.JSON.stringify(e,void 0)},Ea.prototype.parse=function(e){return wn.JSON.parse(e,void 0)},Dn(Ta,yi),Ta.prototype.g=function(){return new Ca(this.l,this.j)},Ta.prototype.i=(pa={},function(){return pa}),Dn(Ca,Lr);var Na=0;function Da(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Aa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Oa(e)}function Oa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(yn=Ca.prototype).open=function(e,t){if(this.readyState!=Na)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Oa(this)},yn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||wn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},yn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Aa(this)),this.readyState=Na},yn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof wn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Da(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},yn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Aa(this):Oa(this),3==this.readyState&&Da(this)}},yn.Ua=function(e){this.g&&(this.response=this.responseText=e,Aa(this))},yn.Ta=function(e){this.g&&(this.response=e,Aa(this))},yn.ha=function(){this.g&&Aa(this)},yn.setRequestHeader=function(e,t){this.v.append(e,t)},yn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},yn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Pa=wn.JSON.parse;function La(e){Lr.call(this),this.headers=new Ui,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ra,this.K=this.L=!1}Dn(La,Lr);var Ra="",Ma=/^https?$/i,Fa=["POST","PUT"];function Va(e){return"content-type"==e.toLowerCase()}function ja(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ba(e),qa(e)}function Ba(e){e.D||(e.D=!0,Rr(e,"complete"),Rr(e,"error"))}function Ua(e){if(e.h&&"undefined"!=typeof kn&&(!e.C[1]||4!=Ka(e)||2!=e.ba()))if(e.v&&4==Ka(e))Yr(e.Fa,0,e);else if(Rr(e,"readystatechange"),4==Ka(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ki)[1]||null;if(!a&&wn.self&&wn.self.location){var o=wn.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ma.test(a?a.toLowerCase():"")}t=i}if(t)Rr(e,"complete"),Rr(e,"success");else{e.m=6;try{var u=2<Ka(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Ba(e)}}finally{qa(e)}}}function qa(e,t){if(e.g){za(e);var n=e.g,r=e.C[0]?bn:null;e.g=null,e.C=null,t||Rr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function za(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(wn.clearTimeout(e.A),e.A=null)}function Ka(e){return e.g?e.g.readyState:0}function Ga(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ra:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Qa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Kn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Xi(e,t,n))}function Ha(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wa(e){this.za=0,this.l=[],this.h=new ri,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ha("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ha("baseRetryDelayMs",5e3,e),this.$a=Ha("retryDelaySeedMs",1e4,e),this.Ya=Ha("forwardChannelMaxRetries",2,e),this.ra=Ha("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new va(e&&e.concurrentRequestLimit),this.Ca=new Sa,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function $a(e){if(Xa(e),3==e.G){var t=e.V++,n=Qi(e.F);Xi(n,"SID",e.J),Xi(n,"RID",t),Xi(n,"TYPE","terminate"),to(e,n),(t=new Si(e,e.h,t,void 0)).K=2,t.v=Ji(Qi(n)),n=!1,wn.navigator&&wn.navigator.sendBeacon&&(n=wn.navigator.sendBeacon(t.v.toString(),"")),!n&&wn.Image&&((new Image).src=t.v,n=!0),n||(t.g=vo(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Li(t)}fo(e)}function Ya(e){e.g&&(ao(e),e.g.cancel(),e.g=null)}function Xa(e){Ya(e),e.u&&(wn.clearTimeout(e.u),e.u=null),uo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&wn.clearTimeout(e.m),e.m=null)}function Ja(e,t){e.l.push(new da(e.Za++,t)),3==e.G&&Za(e)}function Za(e){ma(e.i)||e.m||(e.m=!0,Kr(e.Ha,e),e.C=0)}function eo(e,t){var n;n=t?t.m:e.V++;var r=Qi(e.F);Xi(r,"SID",e.J),Xi(r,"RID",n),Xi(r,"AID",e.U),to(e,r),e.o&&e.s&&Qa(r,e.o,e.s),n=new Si(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=no(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),wa(e.i,n),Ni(n,r,t)}function to(e,t){e.j&&Bi({},(function(e,n){Xi(t,n,e)}))}function no(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Cn(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Ia(l,o,"req"+c+"_")}catch(qo){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ro(e){e.g||e.u||(e.Y=1,Kr(e.Ga,e),e.A=0)}function io(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=di(Cn(e.Ga,e),co(e,e.A)),e.A++,!0)}function ao(e){null!=e.B&&(wn.clearTimeout(e.B),e.B=null)}function oo(e){e.g=new Si(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Qi(e.oa);Xi(t,"RID","rpc"),Xi(t,"SID",e.J),Xi(t,"CI",e.N?"0":"1"),Xi(t,"AID",e.U),to(e,t),Xi(t,"TYPE","xmlhttp"),e.o&&e.s&&Qa(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ji(Qi(t)),n.s=null,n.U=!0,Di(n,e)}function uo(e){null!=e.v&&(wn.clearTimeout(e.v),e.v=null)}function so(e,t){var n=null;if(e.g==t){uo(e),ao(e),e.g=null;var r=2}else{if(!ka(e.i,t))return;n=t.D,ba(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Rr(r=ui(),new hi(r,n,t,i)),Za(e)}else ro(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ga(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=di(Cn(e.Ha,e,t),co(e,e.C)),e.C++,!0))}(e,t)||2==r&&io(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:lo(e,5);break;case 4:lo(e,10);break;case 3:lo(e,6);break;default:lo(e,2)}}function co(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function lo(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Cn(e.jb,e);n||(n=new Gi("//www.google.com/images/cleardot.gif"),wn.location&&"http"==wn.location.protocol||Hi(n,"https"),Ji(n)),function(e,t){var n=new ri;if(wn.Image){var r=new Image;r.onload=Nn(_a,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Nn(_a,n,r,"TestLoadImage: error",!1,t),r.onabort=Nn(_a,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Nn(_a,n,r,"TestLoadImage: timeout",!1,t),wn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else fi(2);e.G=0,e.j&&e.j.va(t),fo(e),Xa(e)}function fo(e){e.G=0,e.I=-1,e.j&&(0==xa(e.i).length&&0==e.l.length||(e.i.i.length=0,Mn(e.l),e.l.length=0),e.j.ua())}function ho(e,t,n){var r=function(e){return e instanceof Gi?Qi(e):new Gi(e,void 0)}(n);if(""!=r.i)t&&Wi(r,t+"."+r.i),$i(r,r.m);else{var i=wn.location;r=function(e,t,n,r){var i=new Gi(null,void 0);return e&&Hi(i,e),t&&Wi(i,t),n&&$i(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Kn(e.aa,(function(e,t){Xi(r,t,e)})),t=e.D,n=e.sa,t&&n&&Xi(r,t,n),Xi(r,"VER",e.ma),to(e,r),r}function vo(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new La(new Ta({ib:!0})):new La(e.qa)).L=e.H,t}function po(){}function yo(){if(Xn&&!(10<=Number(lr)))throw Error("Environmental error: no available transport.")}function mo(e,t){Lr.call(this),this.g=new Wa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Fn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Fn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wo(this)}function go(e){bi.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ko(){xi.call(this),this.status=1}function wo(e){this.g=e}(yn=La.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ki.g(),this.C=this.u?mi(this.u):mi(ki),this.g.onreadystatechange=Cn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ja(this,a)}e=n||"";var i=new Ui(this.headers);r&&Bi(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Va,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=wn.FormData&&e instanceof wn.FormData,!(0<=Pn(Fa,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{za(this),0<this.B&&((this.K=function(e){return Xn&&sr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cn(this.pa,this)):this.A=Yr(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ja(this,a)}},yn.pa=function(){"undefined"!=typeof kn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rr(this,"timeout"),this.abort(8))},yn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Rr(this,"complete"),Rr(this,"abort"),qa(this))},yn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qa(this,!0)),La.Z.M.call(this)},yn.Fa=function(){this.s||(this.F||this.v||this.l?Ua(this):this.cb())},yn.cb=function(){Ua(this)},yn.ba=function(){try{return 2<Ka(this)?this.g.status:-1}catch(pa){return-1}},yn.ga=function(){try{return this.g?this.g.responseText:""}catch(pa){return""}},yn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Pa(t)}},yn.Da=function(){return this.m},yn.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(yn=Wa.prototype).ma=8,yn.G=1,yn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},yn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Si(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Hn(n=Gn(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=no(this,t,r),Xi(i=Qi(this.F),"RID",e),Xi(i,"CVER",22),this.D&&Xi(i,"X-HTTP-Session-Id",this.D),to(this,i),this.o&&n&&Qa(i,this.o,n),wa(this.i,t),this.Ra&&Xi(i,"TYPE","init"),this.ja?(Xi(i,"$req",r),Xi(i,"SID","null"),t.$=!0,Ni(t,i,null)):Ni(t,i,r),this.G=2}}else 3==this.G&&(e?eo(this,e):0==this.l.length||ma(this.i)||eo(this))},yn.Ga=function(){if(this.u=null,oo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=di(Cn(this.bb,this),e)}},yn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fi(10),Ya(this),oo(this))},yn.ab=function(){null!=this.v&&(this.v=null,Ya(this),io(this),fi(19))},yn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),fi(2)):(this.h.info("Failed to ping google.com"),fi(1))},(yn=po.prototype).xa=function(){},yn.wa=function(){},yn.va=function(){},yn.ua=function(){},yn.Oa=function(){},yo.prototype.g=function(e,t){return new mo(e,t)},Dn(mo,Lr),mo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Kr(Cn(e.hb,e,t))),fi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ho(e,null,e.W),Za(e)},mo.prototype.close=function(){$a(this.g)},mo.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ja(this.g,t)}else this.v?((t={}).__data__=Fr(e),Ja(this.g,t)):Ja(this.g,e)},mo.prototype.M=function(){this.g.j=null,delete this.j,$a(this.g),delete this.g,mo.Z.M.call(this)},Dn(go,bi),Dn(ko,xi),Dn(wo,po),wo.prototype.xa=function(){Rr(this.g,"a")},wo.prototype.wa=function(e){Rr(this.g,new go(e))},wo.prototype.va=function(e){Rr(this.g,new ko(e))},wo.prototype.ua=function(){Rr(this.g,"b")},yo.prototype.createWebChannel=yo.prototype.g,mo.prototype.send=mo.prototype.u,mo.prototype.open=mo.prototype.m,mo.prototype.close=mo.prototype.close,vi.NO_ERROR=0,vi.TIMEOUT=8,vi.HTTP_ERROR=6,pi.COMPLETE="complete",gi.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",Lr.prototype.listen=Lr.prototype.N,La.prototype.listenOnce=La.prototype.O,La.prototype.getLastError=La.prototype.La,La.prototype.getLastErrorCode=La.prototype.Da,La.prototype.getStatus=La.prototype.ba,La.prototype.getResponseJson=La.prototype.Qa,La.prototype.getResponseText=La.prototype.ga,La.prototype.send=La.prototype.ea;var bo=gn.createWebChannelTransport=function(){return new yo},xo=gn.getStatEventTarget=function(){return ui()},Eo=gn.ErrorCode=vi,So=gn.EventType=pi,Io=gn.Event=ai,_o=gn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},To=gn.FetchXmlHttpFactory=Ta,Co=gn.WebChannel=gi,No=gn.XhrIo=La,Do="@firebase/firestore",Ao=function(){function e(t){ae(this,e),this.uid=t}return ue(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ao.UNAUTHENTICATED=new Ao(null),Ao.GOOGLE_CREDENTIALS=new Ao("google-credentials-uid"),Ao.FIRST_PARTY=new Ao("first-party-uid"),Ao.MOCK_USER=new Ao("mock-user");var Oo="9.8.4",Po=new et("@firebase/firestore");function Lo(){return Po.logLevel}function Ro(e){if(Po.logLevel<=He.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vo);Po.debug.apply(Po,["Firestore (".concat(Oo,"): ").concat(e)].concat(Be(i)))}}function Mo(e){if(Po.logLevel<=He.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vo);Po.error.apply(Po,["Firestore (".concat(Oo,"): ").concat(e)].concat(Be(i)))}}function Fo(e){if(Po.logLevel<=He.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vo);Po.warn.apply(Po,["Firestore (".concat(Oo,"): ").concat(e)].concat(Be(i)))}}function Vo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function jo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Oo,") INTERNAL ASSERTION FAILED: ")+e;throw Mo(t),new Error(t)}function Bo(e,t){e||jo()}function Uo(e,t){return e}var qo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zo=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ue(n)}(Ce),Ko=ue((function e(){var t=this;ae(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Go=ue((function e(t,n){ae(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Qo=function(){function e(){ae(this,e)}return ue(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ao.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ho=function(){function e(t){ae(this,e),this.token=t,this.changeListener=null}return ue(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Wo=function(){function e(t){ae(this,e),this.t=t,this.currentUser=Ao.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ue(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ko;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ko,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Ro("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Ro("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ko)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ro("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Bo("string"==typeof n.accessToken),new Go(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Bo(null===e||"string"==typeof e),new Ao(e)}}]),e}(),$o=ue((function e(t,n,r){ae(this,e),this.type="FirstParty",this.user=Ao.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Yo=function(){function e(t,n,r){ae(this,e),this.h=t,this.l=n,this.m=r}return ue(e,[{key:"getToken",value:function(){return Promise.resolve(new $o(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ao.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Xo=ue((function e(t){ae(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Jo=function(){function e(t){ae(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ue(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ro("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Ro("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ro("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Ro("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Bo("string"==typeof t.token),e.p=t.token,new Xo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Zo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var eu=function(){function e(){ae(this,e)}return ue(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Zo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function tu(e,t){return e<t?-1:e>t?1:0}function nu(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ru(e){return e+"\0"}var iu=function(){function e(t,n){if(ae(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new zo(qo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new zo(qo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new zo(qo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zo(qo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ue(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?tu(this.nanoseconds,e.nanoseconds):tu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),au=function(){function e(t){ae(this,e),this.timestamp=t}return ue(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new iu(0,0))}},{key:"max",value:function(){return new e(new iu(253402300799,999999999))}}]),e}(),ou=function(){function e(t,n,r){ae(this,e),void 0===n?n=0:n>t.length&&jo(),void 0===r?r=t.length-n:r>t.length-n&&jo(),this.segments=t,this.offset=n,this.len=r}return ue(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),uu=function(e){fe(n,e);var t=ye(n);function n(){return ae(this,n),t.apply(this,arguments)}return ue(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new zo(qo.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Be(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ou),su=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cu=function(e){fe(n,e);var t=ye(n);function n(){return ae(this,n),t.apply(this,arguments)}return ue(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return su.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new zo(qo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new zo(qo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new zo(qo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new zo(qo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ou),lu=function(){function e(t){ae(this,e),this.path=t}return ue(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===uu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(uu.fromString(t))}},{key:"fromName",value:function(t){return new e(uu.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(uu.emptyPath())}},{key:"comparator",value:function(e,t){return uu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new uu(t.slice()))}}]),e}(),fu=ue((function e(t,n,r,i){ae(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function hu(e){return e.fields.find((function(e){return 2===e.kind}))}function du(e){return e.fields.filter((function(e){return 2!==e.kind}))}fu.UNKNOWN_ID=-1;var vu=ue((function e(t,n){ae(this,e),this.fieldPath=t,this.kind=n})),pu=function(){function e(t,n){ae(this,e),this.sequenceNumber=t,this.offset=n}return ue(e,null,[{key:"empty",value:function(){return new e(0,gu.min())}}]),e}();function yu(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=au.fromTimestamp(1e9===r?new iu(n+1,0):new iu(n,r));return new gu(i,lu.empty(),t)}function mu(e){return new gu(e.readTime,e.key,-1)}var gu=function(){function e(t,n,r){ae(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ue(e,null,[{key:"min",value:function(){return new e(au.min(),lu.empty(),-1)}},{key:"max",value:function(){return new e(au.max(),lu.empty(),-1)}}]),e}();function ku(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=lu.comparator(e.documentKey,t.documentKey))?n:tu(e.largestBatchId,t.largestBatchId)}var wu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bu=function(){function e(){ae(this,e),this.onCommittedListeners=[]}return ue(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function xu(e){return Eu.apply(this,arguments)}function Eu(){return Eu=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===qo.FAILED_PRECONDITION&&t.message===wu){e.next=2;break}throw t;case 2:Ro("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Eu.apply(this,arguments)}var Su=function(){function e(t){var n=this;ae(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ue(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&jo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=se(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Iu=function(){function e(t,n){var r=this;ae(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new Ko,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Cu(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=Pu(e.target.error);r.T.reject(new Cu(t,n))}}return ue(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(Ro("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Du(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Cu(n,t)}}}]),e}(),_u=function(){function e(t,n,r){ae(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Ie())&&Mo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ue(e,[{key:"k",value:function(){var e=qe(je().mark((function e(t){var n=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Ro("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Cu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new zo(qo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new zo(qo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Cu(t,n))},i.onupgradeneeded=function(e){Ro("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){Ro("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=qe(je().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(je().mark((function e(){var n,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Iu.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Su.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Ro("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Ro("SimpleDb","Removing database:",e),Au(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!Te())return!1;if(e.S())return!0;var t=Ie(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/react-cooking-recipes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Tu=function(){function e(t){ae(this,e),this.$=t,this.B=!1,this.L=null}return ue(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Au(this.$.delete())}}]),e}(),Cu=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,qo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ue(n)}(zo);function Nu(e){return"IndexedDbTransactionError"===e.name}var Du=function(){function e(t){ae(this,e),this.store=t}return ue(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Ro("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ro("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Au(n)}},{key:"add",value:function(e){return Ro("SimpleDb","ADD",this.store.name,e,e),Au(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Au(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ro("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Ro("SimpleDb","DELETE",this.store.name,e),Au(this.store.delete(e))}},{key:"count",value:function(){return Ro("SimpleDb","COUNT",this.store.name),Au(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Su((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Su((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){Ro("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Su((function(n,r){t.onerror=function(e){var t=Pu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Su((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Tu(i),o=t(i.primaryKey,i.value,a);if(o instanceof Su){var u=o.catch((function(e){return a.done(),Su.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Su.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Au(e){return new Su((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Pu(e.target.error);n(t)}}))}var Ou=!1;function Pu(e){var t=_u.v(Ie());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new zo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ou||(Ou=!0,setTimeout((function(){throw r}),0)),r}}return e}var Lu=function(){function e(t,n){ae(this,e),this.asyncQueue=t,this.X=n,this.task=null}return ue(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;Ro("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Ro,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Nu(e.t4)){e.next=17;break}Ro("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,xu(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Ru=function(){function e(t,n){ae(this,e),this.localStore=t,this.persistence=n}return ue(e,[{key:"tt",value:function(){var e=qe(je().mark((function e(){var t,n=this,r=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Su.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Ro("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return Ro("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=mu(t);ku(r,n)>0&&(n=r)})),new gu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Mu=function(){function e(t,n){var r=this;ae(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return ue(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function Fu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ju(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Mu.ot=-1;var Bu=function(){function e(t,n){ae(this,e),this.comparator=t,this.root=n||qu.EMPTY}return ue(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Uu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Uu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Uu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Uu(this.root,e,this.comparator,!0)}}]),e}(),Uu=function(){function e(t,n,r,i){ae(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ue(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),qu=function(){function e(t,n,r,i,a){ae(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ue(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw jo();if(this.right.isRed())throw jo();var e=this.left.check();if(e!==this.right.check())throw jo();return e+(this.isRed()?0:1)}}]),e}();qu.EMPTY=null,qu.RED=!0,qu.BLACK=!1,qu.EMPTY=new(function(){function e(){ae(this,e),this.size=0}return ue(e,[{key:"key",get:function(){throw jo()}},{key:"value",get:function(){throw jo()}},{key:"color",get:function(){throw jo()}},{key:"left",get:function(){throw jo()}},{key:"right",get:function(){throw jo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new qu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var zu=function(){function e(t){ae(this,e),this.comparator=t,this.data=new Bu(this.comparator)}return ue(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ku(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ku(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ku=function(){function e(t){ae(this,e),this.iter=t}return ue(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Gu(e){return e.hasNext()?e.getNext():void 0}var Qu=function(){function e(t){ae(this,e),this.fields=t,t.sort(cu.comparator)}return ue(e,[{key:"unionWith",value:function(t){var n,r=new zu(cu.comparator),i=se(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=se(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=se(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return nu(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Hu=function(e){function t(e){ae(this,t),this.binaryString=e}return ue(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return tu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Hu.EMPTY_BYTE_STRING=new Hu("");var Wu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $u(e){if(Bo(!!e),"string"==typeof e){var t=0,n=Wu.exec(e);if(Bo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Yu(e.seconds),nanos:Yu(e.nanos)}}function Yu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xu(e){return"string"==typeof e?Hu.fromBase64String(e):Hu.fromUint8Array(e)}function Ju(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zu(e){var t=e.mapValue.fields.__previous_value__;return Ju(t)?Zu(t):t}function es(e){var t=$u(e.mapValue.fields.__local_write_time__.timestampValue);return new iu(t.seconds,t.nanos)}var ts=ue((function e(t,n,r,i,a,o,u,s){ae(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ns=function(){function e(t,n){ae(this,e),this.projectId=t,this.database=n||"(default)"}return ue(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function rs(e){return null==e}function is(e){return 0===e&&1/e==-1/0}function as(e){return"number"==typeof e&&Number.isInteger(e)&&!is(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var os={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},us={nullValue:"NULL_VALUE"};function ss(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ju(e)?4:xs(e)?9007199254740991:10:jo()}function cs(e,t){if(e===t)return!0;var n=ss(e);if(n!==ss(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return es(e).isEqual(es(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$u(e.timestampValue),r=$u(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xu(e.bytesValue).isEqual(Xu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yu(e.geoPointValue.latitude)===Yu(t.geoPointValue.latitude)&&Yu(e.geoPointValue.longitude)===Yu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yu(e.integerValue)===Yu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Yu(e.doubleValue),r=Yu(t.doubleValue);return n===r?is(n)===is(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return nu(e.arrayValue.values||[],t.arrayValue.values||[],cs);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fu(n)!==Fu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cs(n[i],r[i])))return!1;return!0}(e,t);default:return jo()}}function ls(e,t){return void 0!==(e.values||[]).find((function(e){return cs(e,t)}))}function fs(e,t){if(e===t)return 0;var n=ss(e),r=ss(t);if(n!==r)return tu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Yu(e.integerValue||e.doubleValue),r=Yu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hs(e.timestampValue,t.timestampValue);case 4:return hs(es(e),es(t));case 5:return tu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Xu(e),r=Xu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=tu(n[i],r[i]);if(0!==a)return a}return tu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=tu(Yu(e.latitude),Yu(t.latitude));return 0!==n?n:tu(Yu(e.longitude),Yu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=fs(n[i],r[i]);if(a)return a}return tu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===os.mapValue&&t===os.mapValue)return 0;if(e===os.mapValue)return 1;if(t===os.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=tu(r[o],a[o]);if(0!==u)return u;var s=fs(n[r[o]],i[a[o]]);if(0!==s)return s}return tu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw jo()}}function hs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return tu(e,t);var n=$u(e),r=$u(t),i=tu(n.seconds,r.seconds);return 0!==i?i:tu(n.nanos,r.nanos)}function ds(e){return vs(e)}function vs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$u(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Xu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,lu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=se(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=vs(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=se(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(vs(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):jo();var t,n}function ps(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ys(e){return!!e&&"integerValue"in e}function ms(e){return!!e&&"arrayValue"in e}function gs(e){return!!e&&"nullValue"in e}function ks(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ws(e){return!!e&&"mapValue"in e}function bs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Vu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bs(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bs(e.arrayValue.values[r]);return n}return Object.assign({},e)}function xs(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Es(e){return"nullValue"in e?us:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ps(ns.empty(),lu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:jo()}function Ss(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ps(ns.empty(),lu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?os:jo()}function Is(e,t){var n=fs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function _s(e,t){var n=fs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ts=function(){function e(t){ae(this,e),this.value=t}return ue(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ws(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bs(t)}},{key:"setAll",value:function(e){var t=this,n=cu.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bs(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ws(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return cs(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ws(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Vu(t,(function(t,n){return e[t]=n}));var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bs(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Cs(e){var t=[];return Vu(e.fields,(function(e,n){var r=new cu([e]);if(ws(n)){var i=Cs(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=se(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Qu(t)}var Ns=function(){function e(t,n,r,i,a,o){ae(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ue(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=au.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,au.min(),au.min(),Ts.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,au.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,au.min(),Ts.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,au.min(),Ts.empty(),2)}}]),e}(),Ds=ue((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ae(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function As(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ds(e,t,n,r,i,a,o)}function Os(e){var t=Uo(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ds(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),rs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ds(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ds(e)})).join(",")),t.ut=n}return t.ut}function Ps(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!$s(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!cs(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xs(e.startAt,t.startAt)&&Xs(e.endAt,t.endAt)}function Ls(e){return lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Rs(e,t){return e.filters.filter((function(e){return e instanceof Vs&&e.field.isEqual(t)}))}function Ms(e,t,n){var r,i=us,a=!0,o=se(Rs(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=us,c=!0;switch(u.op){case"<":case"<=":s=Es(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=us}Is({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Is({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Fs(e,t,n){var r,i=os,a=!0,o=se(Rs(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=os,c=!0;switch(u.op){case">=":case">":s=Ss(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=os}_s({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];_s({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Vs=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ue(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(fs(t,this.value)):null!==t&&ss(this.value)===ss(t)&&this.at(fs(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jo()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new js(e,t,r):"array-contains"===t?new zs(e,r):"in"===t?new Ks(e,r):"not-in"===t?new Gs(e,r):"array-contains-any"===t?new Qs(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Bs(e,n):new Us(e,n)}}]),n}(function(){return ue((function e(){ae(this,e)}))}()),js=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this,e,r,i)).key=lu.fromName(i.referenceValue),a}return ue(n,[{key:"matches",value:function(e){var t=lu.comparator(e.key,this.key);return this.at(t)}}]),n}(Vs),Bs=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e,"in",r)).keys=qs("in",r),i}return ue(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Vs),Us=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e,"not-in",r)).keys=qs("not-in",r),i}return ue(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Vs);function qs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return lu.fromName(e.referenceValue)}))}var zs=function(e){fe(n,e);var t=ye(n);function n(e,r){return ae(this,n),t.call(this,e,"array-contains",r)}return ue(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ms(t)&&ls(t.arrayValue,this.value)}}]),n}(Vs),Ks=function(e){fe(n,e);var t=ye(n);function n(e,r){return ae(this,n),t.call(this,e,"in",r)}return ue(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ls(this.value.arrayValue,t)}}]),n}(Vs),Gs=function(e){fe(n,e);var t=ye(n);function n(e,r){return ae(this,n),t.call(this,e,"not-in",r)}return ue(n,[{key:"matches",value:function(e){if(ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ls(this.value.arrayValue,t)}}]),n}(Vs),Qs=function(e){fe(n,e);var t=ye(n);function n(e,r){return ae(this,n),t.call(this,e,"array-contains-any",r)}return ue(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ms(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ls(t.value.arrayValue,e)}))}}]),n}(Vs),Hs=ue((function e(t,n){ae(this,e),this.position=t,this.inclusive=n})),Ws=ue((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ae(this,e),this.field=t,this.dir=n}));function $s(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ys(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?lu.comparator(lu.fromName(o.referenceValue),n.key):fs(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Xs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!cs(e.position[n],t.position[n]))return!1;return!0}var Js=ue((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ae(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Zs(e,t,n,r,i,a,o,u){return new Js(e,t,n,r,i,a,o,u)}function ec(e){return new Js(e)}function tc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function nc(e){var t,n=se(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function rc(e){return null!==e.collectionGroup}function ic(e){var t=Uo(e);if(null===t.lt){t.lt=[];var n=nc(t),r=tc(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Ws(n)),t.lt.push(new Ws(cu.keyField(),"asc"));else{var i,a=!1,o=se(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Ws(cu.keyField(),s))}}}return t.lt}function ac(e){var t=Uo(e);if(!t.ft)if("F"===t.limitType)t.ft=As(t.path,t.collectionGroup,ic(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=se(ic(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ws(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Hs(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Hs(t.startAt.position,t.startAt.inclusive):null;t.ft=As(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function oc(e,t,n){return new Js(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function uc(e,t){return Ps(ac(e),ac(t))&&e.limitType===t.limitType}function sc(e){return"".concat(Os(ac(e)),"|lt:").concat(e.limitType)}function cc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ds(t.value));var t})).join(", "),"]")),rs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ds(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ds(e)})).join(",")),"Target(".concat(t,")")}(ac(e)),"; limitType=").concat(e.limitType,")")}function lc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):lu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=se(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=se(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ys(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ic(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ys(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ic(e),t))}(e,t)}function fc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hc(e){return function(t,n){var r,i=!1,a=se(ic(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=dc(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function dc(e,t,n){var r=e.field.isKeyField()?lu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?fs(r,i):jo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return jo()}}function vc(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:is(t)?"-0":t}}function pc(e){return{integerValue:""+e}}function yc(e,t){return as(t)?pc(t):vc(e,t)}var mc=ue((function e(){ae(this,e),this._=void 0}));function gc(e,t,n){return e instanceof bc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof xc?Ec(e,t):e instanceof Sc?Ic(e,t):function(e,t){var n=wc(e,t),r=Tc(n)+Tc(e._t);return ys(n)&&ys(e._t)?pc(r):vc(e.wt,r)}(e,t)}function kc(e,t,n){return e instanceof xc?Ec(e,t):e instanceof Sc?Ic(e,t):n}function wc(e,t){return e instanceof _c?ys(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var bc=function(e){fe(n,e);var t=ye(n);function n(){return ae(this,n),t.apply(this,arguments)}return ue(n)}(mc),xc=function(e){fe(n,e);var t=ye(n);function n(e){var r;return ae(this,n),(r=t.call(this)).elements=e,r}return ue(n)}(mc);function Ec(e,t){var n,r=Cc(t),i=se(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return cs(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sc=function(e){fe(n,e);var t=ye(n);function n(e){var r;return ae(this,n),(r=t.call(this)).elements=e,r}return ue(n)}(mc);function Ic(e,t){var n,r=Cc(t),i=se(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!cs(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var _c=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this)).wt=e,i._t=r,i}return ue(n)}(mc);function Tc(e){return Yu(e.integerValue||e.doubleValue)}function Cc(e){return ms(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Nc=ue((function e(t,n){ae(this,e),this.field=t,this.transform=n}));var Dc=ue((function e(t,n){ae(this,e),this.version=t,this.transformResults=n})),Ac=function(){function e(t,n){ae(this,e),this.updateTime=t,this.exists=n}return ue(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Oc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Pc=ue((function e(){ae(this,e)}));function Lc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Qc(e.key,Ac.none()):new jc(e.key,e.data,Ac.none());var n,r=e.data,i=Ts.empty(),a=new zu(cu.comparator),o=se(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Bc(e.key,i,new Qu(a.toArray()),Ac.none())}function Rc(e,t,n){e instanceof jc?function(e,t,n){var r=e.value.clone(),i=qc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Bc?function(e,t,n){if(Oc(e.precondition,t)){var r=qc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Uc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Mc(e,t,n,r){return e instanceof jc?function(e,t,n,r){if(!Oc(e.precondition,t))return n;var i=e.value.clone(),a=zc(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Bc?function(e,t,n,r){if(!Oc(e.precondition,t))return n;var i=zc(e.fieldTransforms,r,t),a=t.data;return a.setAll(Uc(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Oc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Fc(e,t){var n,r=null,i=se(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=wc(a.transform,o||null);null!=u&&(null===r&&(r=Ts.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Vc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&nu(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xc&&t instanceof xc||e instanceof Sc&&t instanceof Sc?nu(e.elements,t.elements,cs):e instanceof _c&&t instanceof _c?cs(e._t,t._t):e instanceof bc&&t instanceof bc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var jc=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ae(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ue(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Pc),Bc=function(e){fe(n,e);var t=ye(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ae(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ue(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Pc);function Uc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function qc(e,t,n){var r=new Map;Bo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,kc(o,u,n[i]))}return r}function zc(e,t,n){var r,i=new Map,a=se(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,gc(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Kc,Gc,Qc=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ue(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Pc),Hc=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ue(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Pc),Wc=ue((function e(t){ae(this,e),this.count=t}));function $c(e){switch(e){default:return jo();case qo.CANCELLED:case qo.UNKNOWN:case qo.DEADLINE_EXCEEDED:case qo.RESOURCE_EXHAUSTED:case qo.INTERNAL:case qo.UNAVAILABLE:case qo.UNAUTHENTICATED:return!1;case qo.INVALID_ARGUMENT:case qo.NOT_FOUND:case qo.ALREADY_EXISTS:case qo.PERMISSION_DENIED:case qo.FAILED_PRECONDITION:case qo.ABORTED:case qo.OUT_OF_RANGE:case qo.UNIMPLEMENTED:case qo.DATA_LOSS:return!0}}function Yc(e){if(void 0===e)return Mo("GRPC error has no .code"),qo.UNKNOWN;switch(e){case Kc.OK:return qo.OK;case Kc.CANCELLED:return qo.CANCELLED;case Kc.UNKNOWN:return qo.UNKNOWN;case Kc.DEADLINE_EXCEEDED:return qo.DEADLINE_EXCEEDED;case Kc.RESOURCE_EXHAUSTED:return qo.RESOURCE_EXHAUSTED;case Kc.INTERNAL:return qo.INTERNAL;case Kc.UNAVAILABLE:return qo.UNAVAILABLE;case Kc.UNAUTHENTICATED:return qo.UNAUTHENTICATED;case Kc.INVALID_ARGUMENT:return qo.INVALID_ARGUMENT;case Kc.NOT_FOUND:return qo.NOT_FOUND;case Kc.ALREADY_EXISTS:return qo.ALREADY_EXISTS;case Kc.PERMISSION_DENIED:return qo.PERMISSION_DENIED;case Kc.FAILED_PRECONDITION:return qo.FAILED_PRECONDITION;case Kc.ABORTED:return qo.ABORTED;case Kc.OUT_OF_RANGE:return qo.OUT_OF_RANGE;case Kc.UNIMPLEMENTED:return qo.UNIMPLEMENTED;case Kc.DATA_LOSS:return qo.DATA_LOSS;default:return jo()}}(Gc=Kc||(Kc={}))[Gc.OK=0]="OK",Gc[Gc.CANCELLED=1]="CANCELLED",Gc[Gc.UNKNOWN=2]="UNKNOWN",Gc[Gc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gc[Gc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gc[Gc.NOT_FOUND=5]="NOT_FOUND",Gc[Gc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gc[Gc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gc[Gc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gc[Gc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gc[Gc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gc[Gc.ABORTED=10]="ABORTED",Gc[Gc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gc[Gc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gc[Gc.INTERNAL=13]="INTERNAL",Gc[Gc.UNAVAILABLE=14]="UNAVAILABLE",Gc[Gc.DATA_LOSS=15]="DATA_LOSS";var Xc=function(){function e(t,n){ae(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ue(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Vu(this.inner,(function(t,n){var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ju(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Jc=new Bu(lu.comparator);function Zc(){return Jc}var el=new Bu(lu.comparator);function tl(){for(var e=el,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function nl(e){var t=el;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function rl(){return al()}function il(){return al()}function al(){return new Xc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var ol=new Bu(lu.comparator),ul=new zu(lu.comparator);function sl(){for(var e=ul,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var cl=new zu(tu);function ll(){return cl}var fl=function(){function e(t,n,r,i,a){ae(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ue(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,hl.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(au.min(),r,ll(),Zc(),sl())}}]),e}(),hl=function(){function e(t,n,r,i,a){ae(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ue(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Hu.EMPTY_BYTE_STRING,n,sl(),sl(),sl())}}]),e}(),dl=ue((function e(t,n,r,i){ae(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),vl=ue((function e(t,n){ae(this,e),this.targetId=t,this.It=n})),pl=ue((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ae(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),yl=function(){function e(){ae(this,e),this.Tt=0,this.Et=kl(),this.At=Hu.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return ue(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=sl(),t=sl(),n=sl();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:jo()}})),new hl(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=kl()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),ml=function(){function e(t){ae(this,e),this.Mt=t,this.Ft=new Map,this.$t=Zc(),this.Bt=gl(),this.Lt=new zu(tu)}return ue(e,[{key:"Ut",value:function(e){var t,n=se(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=se(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:jo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Ls(i))if(0===n){var a=new lu(i.path);this.Kt(t,a,Ns.newNoDocument(a,au.min()))}else Bo(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Ls(a.target)){var o=new lu(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Ns.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=sl();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new fl(e,n,this.Lt,this.$t,r);return this.$t=Zc(),this.Bt=gl(),this.Lt=new zu(tu),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new yl,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new zu(tu),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Ro("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new yl),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function gl(){return new Bu(lu.comparator)}function kl(){return new Bu(lu.comparator)}var wl={asc:"ASCENDING",desc:"DESCENDING"},bl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xl=ue((function e(t,n){ae(this,e),this.databaseId=t,this.dt=n}));function El(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sl(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Il(e,t){return El(e,t.toTimestamp())}function _l(e){return Bo(!!e),au.fromTimestamp(function(e){var t=$u(e);return new iu(t.seconds,t.nanos)}(e))}function Tl(e,t){return function(e){return new uu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Cl(e){var t=uu.fromString(e);return Bo(Xl(t)),t}function Nl(e,t){return Tl(e.databaseId,t.path)}function Dl(e,t){var n=Cl(t);if(n.get(1)!==e.databaseId.projectId)throw new zo(qo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zo(qo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new lu(Ll(n))}function Al(e,t){return Tl(e.databaseId,t)}function Ol(e){var t=Cl(e);return 4===t.length?uu.emptyPath():Ll(t)}function Pl(e){return new uu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ll(e){return Bo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rl(e,t,n){return{name:Nl(e,t),fields:n.value.mapValue.fields}}function Ml(e,t,n){var r=Dl(e,t.name),i=_l(t.updateTime),a=new Ts({mapValue:{fields:t.fields}}),o=Ns.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Fl(e,t){return"found"in t?function(e,t){Bo(!!t.found),t.found.name,t.found.updateTime;var n=Dl(e,t.found.name),r=_l(t.found.updateTime),i=new Ts({mapValue:{fields:t.found.fields}});return Ns.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Bo(!!t.missing),Bo(!!t.readTime);var n=Dl(e,t.missing),r=_l(t.readTime);return Ns.newNoDocument(n,r)}(e,t):jo()}function Vl(e,t){var n;if(t instanceof jc)n={update:Rl(e,t.key,t.value)};else if(t instanceof Qc)n={delete:Nl(e,t.key)};else if(t instanceof Bc)n={update:Rl(e,t.key,t.data),updateMask:Yl(t.fieldMask)};else{if(!(t instanceof Hc))return jo();n={verify:Nl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof bc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof _c)return{fieldPath:t.field.canonicalString(),increment:n._t};throw jo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Il(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:jo()}(e,t.precondition)),n}function jl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ac.updateTime(_l(e.updateTime)):void 0!==e.exists?Ac.exists(e.exists):Ac.none()}(t.currentDocument):Ac.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Bo("REQUEST_TIME"===t.setToServerValue),n=new bc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new xc(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Sc(i)}else"increment"in t?n=new _c(e,t.increment):jo();var a=cu.fromServerFormat(t.fieldPath);return new Nc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Dl(e,t.update.name),a=new Ts({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Qu(t.map((function(e){return cu.fromServerFormat(e)})))}(t.updateMask);return new Bc(i,a,o,n,r)}return new jc(i,a,n,r)}if(t.delete){var u=Dl(e,t.delete);return new Qc(u,n)}if(t.verify){var s=Dl(e,t.verify);return new Hc(s,n)}return jo()}function Bl(e,t){return{documents:[Al(e,t.path)]}}function Ul(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Al(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Al(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ks(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NAN"}};if(gs(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ks(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NOT_NAN"}};if(gs(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ql(e.field),op:Gl(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ql(e.field),direction:Kl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||rs(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ql(e){var t=Ol(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Bo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=zl(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ws(Hl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return rs(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Hs(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Hs(n,t)}(n.endAt)),Zs(t,i,u,o,s,"F",c,l)}function zl(e){return e?void 0!==e.unaryFilter?[$l(e)]:void 0!==e.fieldFilter?[Wl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return zl(e)})).reduce((function(e,t){return e.concat(t)})):jo():[]}function Kl(e){return wl[e]}function Gl(e){return bl[e]}function Ql(e){return{fieldPath:e.canonicalString()}}function Hl(e){return cu.fromServerFormat(e.fieldPath)}function Wl(e){return Vs.create(Hl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jo()}}(e.fieldFilter.op),e.fieldFilter.value)}function $l(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Hl(e.unaryFilter.field);return Vs.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Hl(e.unaryFilter.field);return Vs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Hl(e.unaryFilter.field);return Vs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Hl(e.unaryFilter.field);return Vs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return jo()}}function Yl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Xl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Jl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ef(t)),t=Zl(e.get(n),t);return ef(t)}function Zl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ef(e){return e+"\x01\x01"}function tf(e){var t=e.length;if(Bo(t>=2),2===t)return Bo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),uu.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&jo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:jo()}a=o+2}return new uu(r)}var nf=["userId","batchId"];function rf(e,t){return[e,Jl(t)]}function af(e,t,n){return[e,Jl(t),n]}var of={},uf=["prefixPath","collectionGroup","readTime","documentId"],sf=["prefixPath","collectionGroup","documentId"],cf=["collectionGroup","readTime","prefixPath","documentId"],lf=["canonicalId","targetId"],ff=["targetId","path"],hf=["path","targetId"],df=["collectionId","parent"],vf=["indexId","uid"],pf=["uid","sequenceNumber"],yf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mf=["indexId","uid","orderedDocumentKey"],gf=["userId","collectionPath","documentId"],kf=["userId","collectionPath","largestBatchId"],wf=["userId","collectionGroup","largestBatchId"],bf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),xf=[].concat(Be(bf),["documentOverlays"]),Ef=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sf=Ef,If=[].concat(Sf,["indexConfiguration","indexState","indexEntries"]),_f=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return ue(n)}(bu);function Tf(e,t){var n=Uo(e);return _u.N(n.ee,t)}var Cf=function(){function e(t,n,r,i){ae(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ue(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Rc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=se(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Mc(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=se(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Mc(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=il();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Lc(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(au.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),sl())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,(function(e,t){return Vc(e,t)}))&&nu(this.baseMutations,e.baseMutations,(function(e,t){return Vc(e,t)}))}}]),e}(),Nf=function(){function e(t,n,r,i){ae(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ue(e,null,[{key:"from",value:function(t,n,r){Bo(t.mutations.length===r.length);for(var i=ol,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Df=function(){function e(t,n){ae(this,e),this.largestBatchId=t,this.mutation=n}return ue(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Af=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:au.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:au.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hu.EMPTY_BYTE_STRING;ae(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ue(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Of=ue((function e(t){ae(this,e),this.ne=t}));function Pf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Lf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Nl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:El(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Rf(t.version)};else{if(!t.isUnknownDocument())return jo();r.unknownDocument={path:n.path.toArray(),version:Rf(t.version)}}return r}function Lf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Rf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Mf(e){var t=new iu(e.seconds,e.nanoseconds);return au.fromTimestamp(t)}function Ff(e,t){for(var n=(t.baseMutations||[]).map((function(t){return jl(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return jl(e.ne,t)})),u=iu.fromMillis(t.localWriteTimeMs);return new Cf(t.batchId,u,n,o)}function Vf(e){var t,n,r=Mf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Mf(e.lastLimboFreeSnapshotVersion):au.min();return void 0!==e.query.documents?(Bo(1===(n=e.query).documents.length),t=ac(ec(Ol(n.documents[0])))):t=function(e){return ac(ql(e))}(e.query),new Af(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Hu.fromBase64String(e.resumeToken))}function jf(e,t){var n,r=Rf(t.snapshotVersion),i=Rf(t.lastLimboFreeSnapshotVersion);n=Ls(t.target)?Bl(e.ne,t.target):Ul(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Os(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Bf(e){var t=ql({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?oc(t,t.limit,"L"):t}function Uf(e,t){return new Df(t.largestBatchId,jl(e.ne,t.overlayMutation))}function qf(e,t){var n=t.path.lastSegment();return[e,Jl(t.path.popLast()),n]}function zf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Rf(r.readTime),documentKey:Jl(r.documentKey.path),largestBatchId:r.largestBatchId}}var Kf=function(){function e(){ae(this,e)}return ue(e,[{key:"getBundleMetadata",value:function(e,t){return Gf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Mf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Gf(e).put({bundleId:(n=t).id,createTime:Rf(_l(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Qf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Bf(t.bundledQuery),readTime:Mf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Qf(e).put(function(e){return{name:e.name,readTime:Rf(_l(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Gf(e){return Tf(e,"bundles")}function Qf(e){return Tf(e,"namedQueries")}var Hf=function(){function e(t,n){ae(this,e),this.wt=t,this.userId=n}return ue(e,[{key:"getOverlay",value:function(e,t){var n=this;return Wf(e).get(qf(this.userId,t)).next((function(e){return e?Uf(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=rl();return Su.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Df(t,a);i.push(r.ie(e,o))})),Su.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Jl(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Wf(e).W("collectionPathOverlayIndex",i))})),Su.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=rl(),a=Jl(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Wf(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=se(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Uf(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=rl(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wf(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Uf(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return Wf(e).put(function(e,t,n){var r=u(qf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Vl(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Wf(e){return Tf(e,"documentOverlays")}var $f=function(){function e(){ae(this,e)}return ue(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Yu(e.integerValue));else if("doubleValue"in e){var n=Yu(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),is(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Xu(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?xs(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):jo()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),lu.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function Yf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Xf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Yf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}$f.ye=new $f;var Jf=function(){function e(){ae(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ue(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=Xf(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=Xf(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Zf=function(){function e(t){ae(this,e),this.Me=t}return ue(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),eh=function(){function e(t){ae(this,e),this.Me=t}return ue(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),th=function(){function e(){ae(this,e),this.Me=new Jf,this.Fe=new Zf(this.Me),this.$e=new eh(this.Me)}return ue(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),nh=function(){function e(t,n,r,i){ae(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ue(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function rh(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=ih(e.arrayValue,t.arrayValue))?n:0!==(n=ih(e.directionalValue,t.directionalValue))?n:lu.comparator(e.documentKey,t.documentKey)}function ih(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var ah=function(){function e(t){ae(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=se(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ue(e,[{key:"Ge",value:function(e){var t=hu(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=du(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=se(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),oh=function(){function e(){ae(this,e),this.ze=new uh}return ue(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Su.resolve()}},{key:"getCollectionParents",value:function(e,t){return Su.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Su.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Su.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Su.resolve(null)}},{key:"getIndexType",value:function(e,t){return Su.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Su.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Su.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Su.resolve(gu.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Su.resolve(gu.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Su.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Su.resolve()}}]),e}(),uh=function(){function e(){ae(this,e),this.index={}}return ue(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zu(uu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new zu(uu.comparator)).toArray()}}]),e}(),sh=new Uint8Array(0),ch=function(){function e(t,n){ae(this,e),this.user=t,this.databaseId=n,this.He=new uh,this.Je=new Xc((function(e){return Os(e)}),(function(e,t){return Ps(e,t)})),this.uid=t.uid||""}return ue(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:Jl(i)};return lh(e).put(a)}return Su.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ru(t),""],!1,!0);return lh(e).K(r).next((function(e){var r,i=se(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(tf(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=hh(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=dh(e);return a.next((function(e){o.put(zf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=hh(e),r=dh(e),i=fh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=fh(e),i=!0,a=new Map;return Su.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=sl(),o=[];return Su.forEach(a,(function(i,a){var u;Ro("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Os(t)));var s=function(e,t){var n=hu(t);if(void 0===n)return null;var r,i=se(Rs(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=se(du(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=se(Rs(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=se(du(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ms(e,o.fieldPath,e.startAt):Fs(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Hs(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=se(du(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Fs(e,o.fieldPath,e.endAt):Ms(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Hs(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),v=n.tn(i,a,c),p=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return Su.forEach(p,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=lu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Su.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):sh,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),v=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,Be(u.createRange(h,d,v)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new nh(e,lu.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new nh(e,lu.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new ah(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=se(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Su.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new zu(cu.comparator),r=!1,i=se(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=se(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new th,i=se(du(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);$f.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new th;return $f.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new th;return $f.ye.re(ps(this.databaseId,t),n.Be(function(e){var t=du(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new th);var i,a=0,o=se(du(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=se(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&ms(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);$f.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=Be(e),a=[],o=se(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=se(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new th;f.seed(l.Oe()),$f.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Vs&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=hh(e),i=dh(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Su.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new pu(t.sequenceNumber,new gu(Mf(t.readTime),new lu(tf(t.documentKey)),t.largestBatchId)):pu.empty(),r=e.fields.map((function(e){var t=u(e,2),n=t[0],r=t[1];return new vu(cu.fromServerFormat(n),r)}));return new fu(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:tu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=hh(e),a=dh(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Su.forEach(t,(function(t){return a.put(zf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Su.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Su.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Su.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Su.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return fh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return fh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=fh(e),i=new zu(rh);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new nh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new zu(rh),r=this.on(t,e);if(null==r)return n;var i=hu(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ms(a)){var o,u=se(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new nh(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new nh(t.indexId,e.key,sh,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Ro("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Gu(a),s=Gu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Gu(o)):l?(i(u),u=Gu(a)):(u=Gu(a),s=Gu(o))}}(r,i,rh,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Su.waitFor(o)}},{key:"ln",value:function(e){var t=1;return dh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return rh(e,t)})).filter((function(e,t,n){return!t||0!==rh(e,n[t-1])}));var r=[];r.push(e);var i,a=se(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=rh(o,e),s=rh(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,sh,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,sh,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(vh)}},{key:"getMinOffset",value:function(e,t){var n=this;return Su.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||jo()}))})).next(vh)}}]),e}();function lh(e){return Tf(e,"collectionParents")}function fh(e){return Tf(e,"indexEntries")}function hh(e){return Tf(e,"indexConfiguration")}function dh(e){return Tf(e,"indexState")}function vh(e){Bo(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ku(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gu(t.readTime,t.documentKey,n)}var ph={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yh=function(){function e(t,n,r){ae(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ue(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function mh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Bo(1===u)})));var c,l=[],f=se(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=af(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Su.waitFor(a).next((function(){return l}))}function gh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw jo();t=e.noDocument}return JSON.stringify(t).length}yh.DEFAULT_COLLECTION_PERCENTILE=10,yh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yh.DEFAULT=new yh(41943040,yh.DEFAULT_COLLECTION_PERCENTILE,yh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yh.DISABLED=new yh(-1,0,0);var kh=function(){function e(t,n,r,i){ae(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return ue(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bh(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=xh(e),o=bh(e);return o.add({}).next((function(u){Bo("number"==typeof u);var s,c=new Cf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Vl(e.ne,t)})),i=n.mutations.map((function(t){return Vl(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new zu((function(e,t){return tu(e.canonicalString(),t.canonicalString())})),d=se(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=af(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,of))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Su.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return bh(e).get(t).next((function(e){return e?(Bo(e.userId===n.userId),Ff(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Su.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return bh(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Bo(t.batchId>=r),a=Ff(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return bh(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bh(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return Ff(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=rf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return xh(e).J({range:i},(function(r,i,o){var s=u(r,3),c=s[0],l=s[1],f=s[2],h=tf(l);if(c===n.userId&&t.path.isEqual(h))return bh(e).get(f).next((function(e){if(!e)throw jo();Bo(e.userId===n.userId),a.push(Ff(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zu(tu),i=[];return t.forEach((function(t){var a=rf(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=xh(e).J({range:o},(function(e,i,a){var o=u(e,3),s=o[0],c=o[1],l=o[2],f=tf(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),Su.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=rf(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new zu(tu);return xh(e).J({range:o},(function(e,t,a){var o=u(e,3),c=o[0],l=o[1],f=o[2],h=tf(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.pn(e,s)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(bh(e).get(t).next((function(e){if(null===e)throw jo();Bo(e.userId===n.userId),r.push(Ff(n.wt,e))})))})),Su.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return mh(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Su.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Su.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return xh(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=tf(e[1]);i.push(a)}else r.done()})).next((function(){Bo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return wh(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Eh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return Bo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function wh(e,t,n){var r=rf(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return xh(e).J({range:a,H:!0},(function(e,n,r){var a=u(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function bh(e){return Tf(e,"mutations")}function xh(e){return Tf(e,"documentMutations")}function Eh(e){return Tf(e,"mutationQueues")}var Sh=function(){function e(t){ae(this,e),this.En=t}return ue(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Ih=function(){function e(t,n){ae(this,e),this.referenceDelegate=t,this.wt=n}return ue(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new Sh(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return au.fromTimestamp(new iu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return _h(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return Bo(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return _h(e).J((function(o,u){var s=Vf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Su.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return _h(e).J((function(e,n){var r=Vf(n);t(r)}))}},{key:"bn",value:function(e){return Th(e).get("targetGlobalKey").next((function(e){return Bo(null!==e),e}))}},{key:"Pn",value:function(e,t){return Th(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return _h(e).put(jf(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Os(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return _h(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Vf(n);Ps(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ch(e);return t.forEach((function(t){var o=Jl(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Su.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ch(e);return Su.forEach(t,(function(t){var a=Jl(t.path);return Su.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ch(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ch(e),i=sl();return r.J({range:n,H:!0},(function(e,t,n){var r=tf(e[1]),a=new lu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Jl(t.path),r=IDBKeyRange.bound([n],[ru(n)],!1,!0),i=0;return Ch(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=u(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return _h(e).get(t).next((function(e){return e?Vf(e):null}))}}]),e}();function _h(e){return Tf(e,"targets")}function Th(e){return Tf(e,"targetGlobal")}function Ch(e){return Tf(e,"targetDocuments")}function Nh(e,t){var n=u(e,2),r=n[0],i=n[1],a=u(t,2),o=a[0],s=a[1],c=tu(r,o);return 0===c?tu(i,s):c}var Dh=function(){function e(t){ae(this,e),this.Sn=t,this.buffer=new zu(Nh),this.Dn=0}return ue(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Nh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ah=function(){function e(t,n,r){ae(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return ue(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;Ro("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Nu(e.t0)){e.next=12;break}Ro("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,xu(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Oh=function(){function e(t,n){ae(this,e),this.On=t,this.params=n}return ue(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Su.resolve(Mu.ot);var r=new Dh(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ro("LruGarbageCollector","Garbage collection skipped; disabled"),Su.resolve(ph)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ro("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ph):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ro("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Lo()<=He.DEBUG&&Ro("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Su.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Ph=function(){function e(t,n){ae(this,e),this.db=t,this.garbageCollector=function(e,t){return new Oh(e,t)}(this,n)}return ue(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Lh(e,n)}},{key:"removeReference",value:function(e,t,n){return Lh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Lh(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Eh(e).Y((function(r){return wh(e,r,t).next((function(e){return e&&(n=!0),Su.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,au.min()),Ch(e).delete([0,Jl(o.path)])}))}));i.push(s)}})).next((function(){return Su.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Lh(e,t)}},{key:"Ln",value:function(e,t){var n,r=Ch(e),i=Mu.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=u(e,2),o=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Mu.ot&&t(new lu(tf(n)),i),i=c,n=s):i=Mu.ot})).next((function(){i!==Mu.ot&&t(new lu(tf(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Lh(e,t){return Ch(e).put(function(e,t){return{targetId:0,path:Jl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Rh=function(){function e(){ae(this,e),this.changes=new Xc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ue(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ns.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Su.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Mh=function(){function e(t){ae(this,e),this.wt=t}return ue(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Bh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Bh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Lf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ns.newInvalidDocument(t);return Bh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Uh(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Ns.newInvalidDocument(t)};return Bh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Uh(t))},(function(e,i){r={document:n.Kn(t,i),size:gh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Zc();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Zc(),i=new Bu(lu.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,gh(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Su.resolve();var r=new zu(zh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Uh(r.first()),Uh(r.last())),a=r.getIterator(),o=a.getNext();return Bh(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=lu.fromSegments([].concat(Be(t.prefixPath),[t.collectionGroup,t.documentId]));o&&zh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(Uh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Lf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bh(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Zc(),i=se(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(lu.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Zc(),o=qh(t,n),u=qh(t,gu.max());return Bh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(lu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Vh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return jh(e).get("remoteDocumentGlobalKey").next((function(e){return Bo(!!e),e}))}},{key:"qn",value:function(e,t){return jh(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ml(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=lu.fromSegments(t.noDocument.path),i=Mf(t.noDocument.readTime);n=Ns.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return jo();var a=lu.fromSegments(t.unknownDocument.path),o=Mf(t.unknownDocument.version);n=Ns.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new iu(e[0],e[1]);return au.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(au.min()))return n}return Ns.newInvalidDocument(e)}}]),e}();function Fh(e){return new Mh(e)}var Vh=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new Xc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ue(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new zu((function(e,t){return tu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Pf(t.zn.wt,o);i=i.add(a.path.popLast());var c=gh(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Pf(t.zn.wt,o.convertToNoDocument(au.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Su.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Rh);function jh(e){return Tf(e,"remoteDocumentGlobal")}function Bh(e){return Tf(e,"remoteDocumentsV14")}function Uh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function qh(e,t){var n=t.documentKey.path.toArray();return[e,Lf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=tu(n[a],r[a]))return i;return(i=tu(n.length,r.length))||((i=tu(n[n.length-2],r[r.length-2]))||tu(n[n.length-1],r[r.length-1]))}var Kh=ue((function e(t,n){ae(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Gh=function(){function e(t,n,r,i){ae(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ue(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Mc(r.mutation,e,Qu.empty(),iu.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,sl()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sl(),i=rl();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=tl();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=rl();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,sl())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Zc(),a=al(),o=al();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Bc)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Mc(o.mutation,t,o.mutation.getFieldMask(),iu.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Kh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=al(),i=new Bu((function(e,t){return e-t})),a=sl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=se(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Qu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||sl()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=il();c.forEach((function(e){if(!a.has(e)){var n=Lc(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Su.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Su.resolve(rl()),u=-1,s=a;return o.next((function(t){return Su.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Su.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,sl())})).next((function(e){return{batchId:u,changes:nl(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new lu(t)).next((function(e){var t=tl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=tl();return this.indexManager.getCollectionParents(e,i).next((function(o){return Su.forEach(o,(function(o){var u=function(e,t){return new Js(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Ns.newInvalidDocument(n)))}));var n=tl();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Mc(a.mutation,i,Qu.empty(),iu.now()),lc(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Su.resolve(Ns.newInvalidDocument(t))}}]),e}(),Qh=function(){function e(t){ae(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return ue(e,[{key:"getBundleMetadata",value:function(e,t){return Su.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:_l(n.createTime)}),Su.resolve()}},{key:"getNamedQuery",value:function(e,t){return Su.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Bf(e.bundledQuery),readTime:_l(e.readTime)}}(t)),Su.resolve()}}]),e}(),Hh=function(){function e(){ae(this,e),this.overlays=new Bu(lu.comparator),this.Xn=new Map}return ue(e,[{key:"getOverlay",value:function(e,t){return Su.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=rl();return Su.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Su.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Su.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=rl(),i=t.length+1,a=new lu(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Su.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Bu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=rl(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=rl(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Su.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Df(t,n));var a=this.Xn.get(t);void 0===a&&(a=sl(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Wh=function(){function e(){ae(this,e),this.Zn=new zu($h.ts),this.es=new zu($h.ns)}return ue(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new $h(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new $h(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new lu(new uu([])),r=new $h(n,e),i=new $h(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new lu(new uu([])),n=new $h(t,e),r=new $h(t,e+1),i=sl();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new $h(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),$h=function(){function e(t,n){ae(this,e),this.key=t,this.ls=n}return ue(e,null,[{key:"ts",value:function(e,t){return lu.comparator(e.key,t.key)||tu(e.ls,t.ls)}},{key:"ns",value:function(e,t){return tu(e.ls,t.ls)||lu.comparator(e.key,t.key)}}]),e}(),Yh=function(){function e(t,n){ae(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new zu($h.ts)}return ue(e,[{key:"checkEmpty",value:function(e){return Su.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Cf(i,t,n,r);this.mutationQueue.push(a);var o,u=se(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new $h(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Su.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Su.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Su.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Su.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Su.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new $h(t,0),i=new $h(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Su.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zu(tu);return t.forEach((function(e){var t=new $h(e,0),i=new $h(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Su.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;lu.isDocumentKey(i)||(i=i.child(""));var a=new $h(new lu(i),0),o=new zu(tu);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Su.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Bo(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Su.forEach(t.mutations,(function(i){var a=new $h(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new $h(t,0),r=this.ds.firstAfterOrEqual(n);return Su.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Su.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Xh=function(){function e(t){ae(this,e),this.ps=t,this.docs=new Bu(lu.comparator),this.size=0}return ue(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Su.resolve(n?n.document.mutableCopy():Ns.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Zc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ns.newInvalidDocument(e))})),Su.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Zc(),i=new lu(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||ku(mu(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Su.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){jo()}},{key:"Is",value:function(e,t){return Su.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Jh(this)}},{key:"getSize",value:function(e){return Su.resolve(this.size)}}]),e}(),Jh=function(e){fe(n,e);var t=ye(n);function n(e){var r;return ae(this,n),(r=t.call(this)).zn=e,r}return ue(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Su.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Rh),Zh=function(){function e(t){ae(this,e),this.persistence=t,this.Ts=new Xc((function(e){return Os(e)}),Ps),this.lastRemoteSnapshotVersion=au.min(),this.highestTargetId=0,this.Es=0,this.As=new Wh,this.targetCount=0,this.Rs=Sh.An()}return ue(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Su.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Su.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Su.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Su.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Su.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Sh(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Su.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Su.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Su.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Su.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Su.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Su.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Su.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Su.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Su.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Su.resolve(n)}},{key:"containsKey",value:function(e,t){return Su.resolve(this.As.containsKey(t))}}]),e}(),ed=function(){function e(t,n){var r=this;ae(this,e),this.bs={},this.overlays={},this.Ps=new Mu(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Zh(this),this.indexManager=new oh,this.remoteDocumentCache=new Xh((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new Of(n),this.Ds=new Qh(this.wt)}return ue(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Hh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Yh(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Ro("MemoryPersistence","Starting transaction:",e);var i=new td(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Su.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),td=function(e){fe(n,e);var t=ye(n);function n(e){var r;return ae(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ue(n)}(bu),nd=function(){function e(t){ae(this,e),this.persistence=t,this.ks=new Wh,this.Os=null}return ue(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw jo()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Su.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Su.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Su.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Su.forEach(this.Fs,(function(r){var i=lu.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,au.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Su.or([function(){return Su.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),rd=function(){function e(t){ae(this,e),this.wt=t}return ue(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Iu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nf,{unique:!0}),e.createObjectStore("documentMutations")}(e),id(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Su.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),id(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:au.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nf,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Su.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:gf});t.createIndex("collectionPathOverlayIndex",kf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",wf,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:uf});t.createIndex("documentKeyIndex",sf),t.createIndex("collectionGroupIndex",cf)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:vf}).createIndex("sequenceNumberIndex",pf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:yf}).createIndex("documentKeyIndex",mf,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=gh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Su.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Su.forEach(r,(function(r){Bo(r.userId===n.userId);var i=Ff(t.wt,r);return mh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new uu(n),o=function(e){return[0,Jl(e)]}(a);r.push(t.get(o).next((function(n){return n?Su.resolve():function(n){return t.put({targetId:0,path:Jl(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Su.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:df});var n=t.store("collectionParents"),r=new uh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Jl(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new uu(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=u(e,3),r=(n[0],n[1]),a=(n[2],tf(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=Vf(r),a=jf(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new lu(uu.fromString(i.document.name).popFirst(5)):i.noDocument?lu.fromSegments(i.noDocument.path):i.unknownDocument?lu.fromSegments(i.unknownDocument.path):jo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Su.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=Fh(this.wt),a=new ed(nd.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:sl();Ff(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Su.forEach(r,(function(e,r){var o=new Ao(r),u=Hf.se(n.wt,o),s=a.getIndexManager(o),c=kh.se(o,n.wt,s,a.referenceDelegate);return new Gh(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new _f(t,Mu.ot),e).next()}))}))}}]),e}();function id(e){e.createObjectStore("targetDocuments",{keyPath:ff}).createIndex("documentTargetsIndex",hf,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lf,{unique:!0}),e.createObjectStore("targetGlobal")}var ad="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",od=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(ae(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new zo(qo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ph(this,i),this.ei=n+"main",this.wt=new Of(s),this.ni=new _u(this.ei,this.Hs,new rd(this.wt)),this.Vs=new Ih(this.referenceDelegate,this.wt),this.remoteDocumentCache=Fh(this.wt),this.Ds=new Kf,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&Mo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ue(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new zo(qo.FAILED_PRECONDITION,ad);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new Mu(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=qe(je().mark((function n(r){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=qe(je().mark((function t(n){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return sd(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Nu(t))return Ro("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ro("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return ud(e).get("owner").next((function(e){return Su.resolve(t.di(e))}))}},{key:"_i",value:function(e){return sd(e).delete(this.clientId)}},{key:"wi",value:function(){var e=qe(je().mark((function e(){var t,n,r,i,a=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Tf(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Su.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=se(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Su.resolve(!0):ud(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new zo(qo.FAILED_PRECONDITION,ad);return!1}}return!(!t.networkEnabled||!t.inForeground)||sd(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ro("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=qe(je().mark((function e(){var t=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new _f(e,Mu.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return sd(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return kh.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new ch(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Hf.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Ro("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?If:14===i?Sf:13===i?Ef:12===i?xf:11===i?bf:void jo();return this.ni.runTransaction(e,o,u,(function(i){return a=new _f(i,r.Ps?r.Ps.next():Mu.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw Mo("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new zo(qo.FAILED_PRECONDITION,wu);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return ud(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new zo(qo.FAILED_PRECONDITION,ad)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ud(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=ud(e);return n.get("owner").next((function(e){return t.di(e)?(Ro("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Su.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Mo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),_e()&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ro("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Mo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Dn){Mo("Failed to set zombie client id.",Dn)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Dn){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return _u.V()}}]),e}();function ud(e){return Tf(e,"owner")}function sd(e){return Tf(e,"clientMetadata")}function cd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ld=function(){function e(t,n,r,i){ae(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return ue(e,null,[{key:"Vi",value:function(t,n){var r,i=sl(),a=sl(),o=se(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),fd=function(){function e(){ae(this,e),this.Si=!1}return ue(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return Su.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(au.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(Lo()<=He.DEBUG&&Ro("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cc(t)),i.Mi(e,o,t,yu(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new zu(hc(e));return t.forEach((function(t,r){lc(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Lo()<=He.DEBUG&&Ro("QueryEngine","Using full collection scan to execute query:",cc(t)),this.Di.getDocumentsMatchingQuery(e,t,gu.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),hd=function(){function e(t,n,r,i){ae(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new Bu(tu),this.Bi=new Xc((function(e){return Os(e)}),Ps),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return ue(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gh(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function dd(e,t,n,r){return new hd(e,t,n,r)}function vd(e,t){return pd.apply(this,arguments)}function pd(){return pd=qe(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=sl(),s=se(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=se(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=se(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=se(p.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),pd.apply(this,arguments)}function yd(e,t){var n=Uo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Su.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Bo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=sl(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function md(e){var t=Uo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function gd(e,t){var n=Uo(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Hu.EMPTY_BYTE_STRING,au.min()).withLastLimboFreeSnapshotVersion(au.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=Zc(),s=sl();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(kd(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(au.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Su.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function kd(e,t,n){var r=sl(),i=sl();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Zc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(au.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ro("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function wd(e,t){var n=Uo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function bd(e,t){var n=Uo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Su.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new Af(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function xd(e,t,n){return Ed.apply(this,arguments)}function Ed(){return Ed=qe(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Uo(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Nu(e.t1)){e.next=12;break}throw e.t1;case 12:Ro("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ed.apply(this,arguments)}function Sd(e,t,n){var r=Uo(e),i=au.min(),a=sl();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Uo(e),i=r.Bi.get(n);return void 0!==i?Su.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,ac(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:au.min(),n?a:sl())})).next((function(e){return Td(r,fc(t),e),{documents:e,ji:a}}))}))}function Id(e,t){var n=Uo(e),r=Uo(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function _d(e,t){var n=Uo(e),r=n.Li.get(t)||au.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,yu(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Td(n,t,e),e}))}function Td(e,t,n){var r=au.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function Cd(e,t,n,r){return Nd.apply(this,arguments)}function Nd(){return Nd=qe(je().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,v;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Uo(t),o=sl(),u=Zc(),s=se(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,bd(a,function(e){return ac(ec(uu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return kd(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Nd.apply(this,arguments)}function Dd(e,t){return Ad.apply(this,arguments)}function Ad(){return Ad=qe(je().mark((function e(t,n){var r,i,a,o=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:sl(),e.next=3,bd(t,ac(Bf(n.bundledQuery)));case 3:return i=e.sent,a=Uo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=_l(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(Hu.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Od(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Pd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ld(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Rd=function(){function e(t,n,r,i){ae(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ue(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new zo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Mo("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Md=function(){function e(t,n,r){ae(this,e),this.targetId=t,this.state=n,this.error=r}return ue(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new zo(i.error.code,i.error.message))),a?new e(t,i.state,r):(Mo("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Fd=function(){function e(t,n){ae(this,e),this.clientId=t,this.activeTargetIds=n}return ue(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ll(),o=0;i&&o<r.activeTargetIds.length;++o)i=as(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Mo("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Vd=function(){function e(t,n){ae(this,e),this.clientId=t,this.onlineState=n}return ue(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Mo("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),jd=function(){function e(){ae(this,e),this.activeTargetIds=ll()}return ue(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Bd=function(){function e(t,n,r,i,a){ae(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Bu(tu),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Od(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new jd),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ue(e,[{key:"start",value:function(){var e=qe(je().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=se(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Od(this.persistenceKey,i)))&&(o=Fd.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=se(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ld(this.persistenceKey,e));if(n){var r=Md.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ld(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Ro("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Ro("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Ro("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ro("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Mo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(qe(je().mark((function e(){var r,i,a,o,u,s,c;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=Mu.ot;if(null!=e)try{var n=JSON.parse(e);Bo("number"==typeof n),t=n}catch(e){Mo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Mu.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Rd(this.currentUser,e,t,n),i=Pd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Pd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Ld(this.persistenceKey,e),i=new Md(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Fd.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Rd.Ji(new Ao(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Md.Ji(r,t)}},{key:"wr",value:function(e){return Vd.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Ro("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=ll();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Ud=function(){function e(){ae(this,e),this.Fr=new jd,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ue(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new jd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),qd=function(){function e(){ae(this,e)}return ue(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),zd=function(){function e(){var t=this;ae(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return ue(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Ro("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=se(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){Ro("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=se(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Kd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Gd=function(){function e(t){ae(this,e),this.jr=t.jr,this.Wr=t.Wr}return ue(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Qd=function(e){fe(n,e);var t=ye(n);function n(e){var r;return ae(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ue(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new No;o.listenOnce(So.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Eo.NO_ERROR:var t=o.getResponseJson();Ro("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Eo.TIMEOUT:Ro("Connection",'RPC "'+e+'" timed out'),a(new zo(qo.DEADLINE_EXCEEDED,"Request time out"));break;case Eo.HTTP_ERROR:var n=o.getStatus();if(Ro("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(qo).indexOf(t)>=0?t:qo.UNKNOWN}(r.status);a(new zo(u,r.message))}else a(new zo(qo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new zo(qo.UNAVAILABLE,"Connection failed."));break;default:jo()}}finally{Ro("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=bo(),a=xo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new To({})),this.uo(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())||"object"===typeof navigator&&"ReactNative"===navigator.product||Ie().indexOf("Electron/")>=0||function(){var e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||Ie().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Ro("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Gd({jr:function(e){l?Ro("Connection","Not sending because WebChannel is closed:",e):(c||(Ro("Connection","Opening WebChannel transport."),s.open(),c=!0),Ro("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Co.EventType.OPEN,(function(){l||Ro("Connection","WebChannel transport opened.")})),h(s,Co.EventType.CLOSE,(function(){l||(l=!0,Ro("Connection","WebChannel transport closed"),f.eo())})),h(s,Co.EventType.ERROR,(function(e){l||(l=!0,Fo("Connection","WebChannel transport errored:",e),f.eo(new zo(qo.UNAVAILABLE,"The operation could not be completed")))})),h(s,Co.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Bo(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ro("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Kc[e];if(void 0!==t)return Yc(t)}(a),u=i.message;void 0===o&&(o=qo.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new zo(o,u)),s.close()}else Ro("Connection","WebChannel received:",n),f.no(n)}})),h(a,Io.STAT_EVENT,(function(e){e.stat===_o.PROXY?Ro("Connection","Detected buffering proxy"):e.stat===_o.NOPROXY&&Ro("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){ae(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ue(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Ro("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return Ro("RestConnection","Received: ",e),e}),(function(t){throw Fo("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Kd[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Hd(){return"undefined"!=typeof window?window:null}function Wd(){return"undefined"!=typeof document?document:null}function $d(e){return new xl(e,!0)}var Yd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ae(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ue(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Ro("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),Xd=function(){function e(t,n,r,i,a,o,u,s){ae(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Yd(t,n)}return ue(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=qe(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===qo.RESOURCE_EXHAUSTED?(Mo(n.toString()),Mo("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===qo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new zo(qo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(qe(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Ro("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Ro("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Jd=function(e){fe(n,e);var t=ye(n);function n(e,r,i,a,o,u){var s;return ae(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return ue(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:jo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(Bo(void 0===t||"string"==typeof t),Hu.fromBase64String(t||"")):(Bo(void 0===t||t instanceof Uint8Array),Hu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?qo.UNKNOWN:Yc(e.code);return new zo(t,e.message||"")}(o);n=new pl(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Dl(e,s.document.name),l=_l(s.document.updateTime),f=new Ts({mapValue:{fields:s.document.fields}}),h=Ns.newFoundDocument(c,l,f),d=s.targetIds||[],v=s.removedTargetIds||[];n=new dl(d,v,h.key,h)}else if("documentDelete"in t){t.documentDelete;var p=t.documentDelete;p.document;var y=Dl(e,p.document),m=p.readTime?_l(p.readTime):au.min(),g=Ns.newNoDocument(y,m),k=p.removedTargetIds||[];n=new dl([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Dl(e,w.document),x=w.removedTargetIds||[];n=new dl([],x,b,null)}else{if(!("filter"in t))return jo();t.filter;var E=t.filter;E.targetId;var S=E.count||0,I=new Wc(S),_=E.targetId;n=new vl(_,I)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return au.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?au.min():t.readTime?_l(t.readTime):au.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Pl(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Ls(r)?{documents:Bl(e,r)}:{query:Ul(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Sl(e,t.resumeToken):t.snapshotVersion.compareTo(au.min())>0&&(n.readTime=El(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=Pl(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(Xd),Zd=function(e){fe(n,e);var t=ye(n);function n(e,r,i,a,o,u){var s;return ae(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return ue(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,pn(he(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Bo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Bo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?_l(e.updateTime):_l(t);return n.isEqual(au.min())&&(n=_l(t)),new Dc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=_l(e.commitTime);return this.listener.Jo(n,t)}return Bo(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Pl(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Vl(t.wt,e)}))};this.Mo(n)}}]),n}(Xd),ev=function(e){fe(n,e);var t=ye(n);function n(e,r,i,a){var o;return ae(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return ue(n,[{key:"tu",value:function(){if(this.Zo)throw new zo(qo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===qo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new zo(qo.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=u(a,2),s=o[0],c=o[1];return i.bo.ao(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===qo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new zo(qo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ue((function e(){ae(this,e)}))}()),tv=function(){function e(t,n){ae(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ue(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Mo(t),this.su=!1):Ro("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),nv=ue((function e(t,n,r,i,a){var o=this;ae(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=dv(o),!e.t0){e.next=5;break}return Ro("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=qe(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Uo(t)).lu.add(4),e.next=4,av(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,rv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new tv(r,i)}));function rv(e){return iv.apply(this,arguments)}function iv(){return iv=qe(je().mark((function e(t){var n,r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dv(t)){e.next=18;break}n=se(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),iv.apply(this,arguments)}function av(e){return ov.apply(this,arguments)}function ov(){return ov=qe(je().mark((function e(t){var n,r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=se(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),ov.apply(this,arguments)}function uv(e,t){var n=Uo(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),hv(n)?fv(n):qv(n).Co()&&cv(n,t))}function sv(e,t){var n=Uo(e),r=qv(n);n.hu.delete(t),r.Co()&&lv(n,t),0===n.hu.size&&(r.Co()?r.ko():dv(n)&&n._u.set("Unknown"))}function cv(e,t){e.wu.Nt(t.targetId),qv(e).Qo(t)}function lv(e,t){e.wu.Nt(t),qv(e).jo(t)}function fv(e){e.wu=new ml({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),qv(e).start(),e._u.iu()}function hv(e){return dv(e)&&!qv(e).Do()&&e.hu.size>0}function dv(e){return 0===Uo(e).lu.size}function vv(e){e.wu=void 0}function pv(e){return yv.apply(this,arguments)}function yv(){return yv=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){cv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}function mv(e,t){return gv.apply(this,arguments)}function gv(){return gv=qe(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vv(t),hv(t)?(t._u.uu(n),fv(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),gv.apply(this,arguments)}function kv(e,t,n){return wv.apply(this,arguments)}function wv(){return wv=qe(je().mark((function e(t,n,r){var i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof pl&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=qe(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=se(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ro("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,bv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof dl?t.wu.Ut(n):n instanceof vl?t.wu.zt(n):t.wu.Gt(n),r.isEqual(au.min())){e.next=29;break}return e.prev=14,e.next=17,md(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Hu.EMPTY_BYTE_STRING,n.snapshotVersion)),lv(e,t);var r=new Af(n.target,t,1,n.sequenceNumber);cv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ro("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,bv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),wv.apply(this,arguments)}function bv(e,t,n){return xv.apply(this,arguments)}function xv(){return xv=qe(je().mark((function e(t,n,r){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nu(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,av(t);case 5:t._u.set("Offline"),r||(r=function(){return md(t.localStore)}),t.asyncQueue.enqueueRetryable(qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ro("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,rv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function Ev(e,t){return t().catch((function(n){return bv(e,n,t)}))}function Sv(e){return Iv.apply(this,arguments)}function Iv(){return Iv=qe(je().mark((function e(t){var n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Uo(t),r=zv(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!_v(n)){e.next=19;break}return e.prev=3,e.next=6,wd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Tv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,bv(n,e.t0);case 17:e.next=2;break;case 19:Cv(n)&&Nv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Iv.apply(this,arguments)}function _v(e){return dv(e)&&e.au.length<10}function Tv(e,t){e.au.push(t);var n=zv(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Cv(e){return dv(e)&&!zv(e).Do()&&e.au.length>0}function Nv(e){zv(e).start()}function Dv(e){return Av.apply(this,arguments)}function Av(){return Av=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zv(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Av.apply(this,arguments)}function Ov(e){return Pv.apply(this,arguments)}function Pv(){return Pv=qe(je().mark((function e(t){var n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=zv(t),r=se(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function Lv(e,t,n){return Rv.apply(this,arguments)}function Rv(){return Rv=qe(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=Nf.from(i,n,r),e.next=3,Ev(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Sv(t);case 5:case"end":return e.stop()}}),e)}))),Rv.apply(this,arguments)}function Mv(e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=qe(je().mark((function e(t,n){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&zv(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=qe(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$c(i=n.code)||i===qo.ABORTED){e.next=7;break}return r=t.au.shift(),zv(t).No(),e.next=5,Ev(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Sv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Cv(t)&&Nv(t);case 5:case"end":return e.stop()}}),e)}))),Fv.apply(this,arguments)}function Vv(e,t){return jv.apply(this,arguments)}function jv(){return jv=qe(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Uo(t)).asyncQueue.verifyOperationInProgress(),Ro("RemoteStore","RemoteStore received new credentials"),i=dv(r),r.lu.add(3),e.next=6,av(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,rv(r);case 12:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function Bv(e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=qe(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uo(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,rv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,av(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Uv.apply(this,arguments)}function qv(e){return e.mu||(e.mu=function(e,t,n){var r=Uo(e);return r.tu(),new Jd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:pv.bind(null,e),Jr:mv.bind(null,e),Go:kv.bind(null,e)}),e.fu.push(function(){var t=qe(je().mark((function t(n){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),hv(e)?fv(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:vv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function zv(e){return e.gu||(e.gu=function(e,t,n){var r=Uo(e);return r.tu(),new Zd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Dv.bind(null,e),Jr:Mv.bind(null,e),Yo:Ov.bind(null,e),Jo:Lv.bind(null,e)}),e.fu.push(function(){var t=qe(je().mark((function t(n){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Sv(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Ro("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var Kv=function(){function e(t,n,r,i,a){ae(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ue(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zo(qo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Gv(e,t){if(Mo("AsyncQueue","".concat(t,": ").concat(e)),Nu(e))return new zo(qo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Qv=function(){function e(t){ae(this,e),this.comparator=t?function(e,n){return t(e,n)||lu.comparator(e.key,n.key)}:function(e,t){return lu.comparator(e.key,t.key)},this.keyedMap=tl(),this.sortedSet=new Bu(this.comparator)}return ue(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Hv=function(){function e(){ae(this,e),this.yu=new Bu(lu.comparator)}return ue(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):jo():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Wv=function(){function e(t,n,r,i,a,o,u,s){ae(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ue(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Qv.emptySet(n),a,r,i,!0,!1)}}]),e}(),$v=ue((function e(){ae(this,e),this.Iu=void 0,this.listeners=[]})),Yv=ue((function e(){ae(this,e),this.queries=new Xc((function(e){return sc(e)}),uc),this.onlineState="Unknown",this.Tu=new Set}));function Xv(e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=qe(je().mark((function e(t,n){var r,i,a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new $v),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Gv(e.t0,"Initialization of query '".concat(cc(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&rp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Jv.apply(this,arguments)}function Zv(e,t){return ep.apply(this,arguments)}function ep(){return ep=qe(je().mark((function e(t,n){var r,i,a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ep.apply(this,arguments)}function tp(e,t){var n,r=Uo(e),i=!1,a=se(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=se(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&rp(r)}function np(e,t,n){var r=Uo(e),i=r.queries.get(t);if(i){var a,o=se(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function rp(e){e.Tu.forEach((function(e){e.next()}))}var ip=function(){function e(t,n,r){ae(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ue(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=se(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Wv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=Wv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),ap=function(){function e(t,n){ae(this,e),this.payload=t,this.byteLength=n}return ue(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),op=function(){function e(t){ae(this,e),this.wt=t}return ue(e,[{key:"Wi",value:function(e){return Dl(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?Ml(this.wt,e.document,!1):Ns.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return _l(e)}}]),e}(),up=function(){function e(t,n,r){ae(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sp(t)}return ue(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=uu.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new op(this.wt),i=se(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=se(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||sl()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=qe(je().mark((function e(){var t,n,r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cd(this.localStore,new op(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=se(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Dd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function sp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var cp=ue((function e(t){ae(this,e),this.key=t})),lp=ue((function e(t){ae(this,e),this.key=t})),fp=function(){function e(t,n){ae(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=sl(),this.mutatedKeys=sl(),this.Lu=hc(t),this.Uu=new Qv(this.Lu)}return ue(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new Hv,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=lc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jo()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new Wv(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Hv,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=sl(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new lp(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new cp(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=sl();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return Wv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),hp=ue((function e(t,n,r){ae(this,e),this.query=t,this.targetId=n,this.view=r})),dp=ue((function e(t){ae(this,e),this.key=t,this.Xu=!1})),vp=function(){function e(t,n,r,i,a,o){ae(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Xc((function(e){return sc(e)}),uc),this.ec=new Map,this.nc=new Set,this.sc=new Bu(lu.comparator),this.ic=new Map,this.rc=new Wh,this.oc={},this.uc=new Map,this.cc=Sh.Rn(),this.onlineState="Unknown",this.ac=void 0}return ue(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function pp(e,t){return yp.apply(this,arguments)}function yp(){return yp=qe(je().mark((function e(t,n){var r,i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=sy(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,bd(r.localStore,ac(n));case 8:return u=e.sent,r.isPrimaryClient&&uv(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,mp(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),yp.apply(this,arguments)}function mp(e,t,n,r){return gp.apply(this,arguments)}function gp(){return gp=qe(je().mark((function e(t,n,r,i){var a,o,u,s,c,l;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=qe(je().mark((function e(t,n,r,i){var a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,Sd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Vp(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Sd(t.localStore,n,!0);case 3:return a=e.sent,o=new fp(n,a.ji),u=o.Ku(a.documents),s=hl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Vp(t,r,c.zu),l=new hp(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function kp(e,t){return wp.apply(this,arguments)}function wp(){return wp=qe(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uo(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!uc(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,xd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),sv(r.remoteStore,i.targetId),Mp(r,i.targetId)})).catch(xu);case 9:e.next=14;break;case 11:return Mp(r,i.targetId),e.next=14,xd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),wp.apply(this,arguments)}function bp(e,t,n){return xp.apply(this,arguments)}function xp(){return xp=qe(je().mark((function e(t,n,r){var i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cy(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Uo(e),a=iu.now(),o=t.reduce((function(e,t){return e.add(t.key)}),sl());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Zc(),s=sl();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=se(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Fc(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Bc(c.key,l,Cs(l.value.mapValue),Ac.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:nl(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new Bu(tu)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Up(i,a.changes);case 9:return e.next=11,Sv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Gv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),xp.apply(this,arguments)}function Ep(e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=qe(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t),e.prev=1,e.next=4,gd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Bo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Bo(n.Xu):e.removedDocuments.size>0&&(Bo(n.Xu),n.Xu=!1))})),e.next=8,Up(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,xu(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Sp.apply(this,arguments)}function Ip(e,t,n){var r=Uo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Uo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=se(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&rp(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function _p(e,t,n){return Tp.apply(this,arguments)}function Tp(){return Tp=qe(je().mark((function e(t,n,r){var i,a,o,u,s,c;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Uo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Bu(lu.comparator)).insert(o,Ns.newNoDocument(o,au.min())),s=sl().add(o),c=new fl(au.min(),new Map,new zu(tu),u,s),e.next=9,Ep(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),Bp(i),e.next=16;break;case 14:return e.next=16,xd(i.localStore,n,!1).then((function(){return Mp(i,n,r)})).catch(xu);case 16:case"end":return e.stop()}}),e)}))),Tp.apply(this,arguments)}function Cp(e,t){return Np.apply(this,arguments)}function Np(){return Np=qe(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t),i=n.batch.batchId,e.prev=1,e.next=4,yd(r.localStore,n);case 4:return a=e.sent,Rp(r,i,null),Lp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Up(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,xu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Np.apply(this,arguments)}function Dp(e,t,n){return Ap.apply(this,arguments)}function Ap(){return Ap=qe(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uo(t),e.prev=1,e.next=4,function(e,t){var n=Uo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Bo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Rp(i,n,r),Lp(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Up(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,xu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Ap.apply(this,arguments)}function Op(e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=qe(je().mark((function e(t,n){var r,i,a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dv((r=Uo(t)).remoteStore)||Ro("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Uo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Gv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Pp.apply(this,arguments)}function Lp(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function Rp(e,t,n){var r=Uo(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function Mp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=se(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||Fp(e,t)}))}function Fp(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(sv(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),Bp(e))}function Vp(e,t,n){var r,i=se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof cp?(e.rc.addReference(a.key,t),jp(e,a)):a instanceof lp?(Ro("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||Fp(e,a.key)):jo()}}catch(o){i.e(o)}finally{i.f()}}function jp(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Ro("SyncEngine","New document in limbo: "+n),e.nc.add(r),Bp(e))}function Bp(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new lu(uu.fromString(t)),r=e.cc.next();e.ic.set(r,new dp(n)),e.sc=e.sc.insert(n,r),uv(e.remoteStore,new Af(ac(ec(n.path)),r,2,Mu.ot))}}function Up(e,t,n){return qp.apply(this,arguments)}function qp(){return qp=qe(je().mark((function e(t,n,r){var i,a,o,u;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Uo(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=ld.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=qe(je().mark((function e(t,n){var r,i,a,o,u,s,c,l;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Su.forEach(n,(function(t){return Su.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Su.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Nu(e.t0)){e.next=10;break}throw e.t0;case 10:Ro("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=se(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function zp(e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=qe(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Uo(t)).currentUser.isEqual(n)){e.next=11;break}return Ro("SyncEngine","User change. New user:",n.toKey()),e.next=5,vd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new zo(qo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Up(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Kp.apply(this,arguments)}function Gp(e,t){var n=Uo(e),r=n.ic.get(t);if(r&&r.Xu)return sl().add(r.key);var i=sl(),a=n.ec.get(t);if(!a)return i;var o,u=se(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Qp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=qe(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t),e.next=3,Sd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&Vp(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Wp(e,t){return $p.apply(this,arguments)}function $p(){return $p=qe(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t),e.abrupt("return",_d(r.localStore,n).then((function(e){return Up(r,e)})));case 2:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Yp(e,t,n,r){return Xp.apply(this,arguments)}function Xp(){return Xp=qe(je().mark((function e(t,n,r,i){var a,o;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Uo(t),e.next=3,function(e,t){var n=Uo(e),r=Uo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Su.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Sv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Rp(a,n,i||null),Lp(a,n),function(e,t){Uo(Uo(e).mutationQueue).In(t)}(a.localStore,n)):jo();case 11:return e.next=13,Up(a,o);case 13:e.next=16;break;case 15:Ro("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}function Jp(e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=qe(je().mark((function e(t,n){var r,i,a,o,u,s,c,l;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sy(r=Uo(t)),cy(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,ey(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,Bv(r.remoteStore,!0);case 9:o=se(a);try{for(o.s();!(u=o.n()).done;)s=u.value,uv(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Mp(r,t),xd(r.localStore,t,!0)})),sv(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,ey(r,c);case 21:return function(e){var t=Uo(e);t.ic.forEach((function(e,n){sv(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new Bu(lu.comparator)}(r),r.ac=!1,e.next=25,Bv(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Zp.apply(this,arguments)}function ey(e,t,n){return ty.apply(this,arguments)}function ty(){return ty=qe(je().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,v,p,y,m;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Uo(t),a=[],o=[],u=se(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,bd(i.localStore,ac(f[0]));case 11:l=e.sent,h=se(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.tc.get(v),e.next=20,Qp(i,p);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Id(i.localStore,c);case 36:return m=e.sent,e.next=39,bd(i.localStore,m);case 39:return l=e.sent,e.next=42,mp(i,ny(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),ty.apply(this,arguments)}function ny(e){return Zs(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ry(e){var t=Uo(e);return Uo(Uo(t.localStore).persistence).Ri()}function iy(e,t,n,r){return ay.apply(this,arguments)}function ay(){return ay=qe(je().mark((function e(t,n,r,i){var a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Uo(t)).ac){e.next=3;break}return e.abrupt("return",void Ro("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,_d(a.localStore,fc(o[0]));case 10:return u=e.sent,s=fl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Up(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,xd(a.localStore,n,!0);case 17:return Mp(a,n,i),e.abrupt("break",20);case 19:jo();case 20:case"end":return e.stop()}}),e)}))),ay.apply(this,arguments)}function oy(e,t,n){return uy.apply(this,arguments)}function uy(){return uy=qe(je().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=sy(t)).ac){e.next=45;break}a=se(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return Ro("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Id(i.localStore,u);case 12:return s=e.sent,e.next=15,bd(i.localStore,s);case 15:return c=e.sent,e.next=18,mp(i,ny(s),c.targetId,!1);case 18:uv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=se(r),e.prev=30,h=je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,xd(i.localStore,t,!1).then((function(){sv(i.remoteStore,t),Mp(i,t)})).catch(xu);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),uy.apply(this,arguments)}function sy(e){var t=Uo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ep.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_p.bind(null,t),t.Zu.Go=tp.bind(null,t.eventManager),t.Zu.lc=np.bind(null,t.eventManager),t}function cy(e){var t=Uo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Cp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Dp.bind(null,t),t}function ly(e,t,n){var r=Uo(e);(function(){var e=qe(je().mark((function e(t,n,r){var i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Uo(e),r=_l(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(sp(i)),a=new up(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Up(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=Uo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Fo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var fy=function(){function e(){ae(this,e),this.synchronizeTabs=!1}return ue(e,[{key:"initialize",value:function(){var e=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=$d(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return dd(this.persistence,new fd,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new ed(nd.Ms,this.wt)}},{key:"dc",value:function(e){return new Ud}},{key:"terminate",value:function(){var e=qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),hy=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ue(n,[{key:"initialize",value:function(){var e=qe(je().mark((function e(t){var r=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn(he(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,cy(this.yc.syncEngine);case 6:return e.next=8,Sv(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return dd(this.persistence,new fd,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Ah(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new Ru(t,this.persistence);return new Lu(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=cd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yh.withCacheSize(this.cacheSizeBytes):yh.DEFAULT;return new od(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Hd(),Wd(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new Ud}}]),n}(fy),dy=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ue(n,[{key:"initialize",value:function(){var e=qe(je().mark((function e(t){var r,i=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn(he(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof Bd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:Yp.bind(null,r),Or:iy.bind(null,r),Mr:oy.bind(null,r),Ri:ry.bind(null,r),Nr:Wp.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jp(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=Hd();if(!Bd.V(t))throw new zo(qo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=cd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(hy),vy=function(){function e(){ae(this,e)}return ue(e,[{key:"initialize",value:function(){var e=qe(je().mark((function e(t,n){var r=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ip(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=zp.bind(null,this.syncEngine),e.next=12,Bv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Yv}},{key:"createDatastore",value:function(e){var t,n=$d(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Qd(t));return function(e,t,n,r){return new ev(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ip(o.syncEngine,e,0)},a=zd.V()?new zd:new qd,new nv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new vp(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=qe(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uo(t),Ro("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,av(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function py(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return qe(je().mark((function r(){var i;return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var yy=function(){function e(t){ae(this,e),this.observer=t,this.muted=!1}return ue(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),my=function(){function e(t,n){var r=this;ae(this,e),this.Ec=t,this.wt=n,this.metadata=new Ko,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ue(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=qe(je().mark((function e(){var t,n,r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new ap(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=qe(je().mark((function e(){var t,n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=qe(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=qe(je().mark((function e(){var t,n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),gy=function(){function e(t){ae(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ue(e,[{key:"lookup",value:function(){var e=qe(je().mark((function e(t){var n,r=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new zo(qo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=qe(je().mark((function e(t,n){var r,i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t),i=Pl(r.wt)+"/documents",a={documents:n.map((function(e){return Nl(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Fl(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Bo(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Qc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=qe(je().mark((function e(){var t,n=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=lu.fromPath(t);n.mutations.push(new Hc(r,n.precondition(r)))})),e.next=7,function(){var e=qe(je().mark((function e(t,n){var r,i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uo(t),i=Pl(r.wt)+"/documents",a={writes:n.map((function(e){return Vl(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jo();t=au.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new zo(qo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ac.updateTime(t):Ac.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(au.min()))throw new zo(qo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ac.updateTime(t)}return Ac.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ky=function(){function e(t,n,r,i,a){ae(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new Yd(this.asyncQueue,"transaction_retry")}return ue(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(qe(je().mark((function t(){var n,r;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new gy(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!rs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!$c(t)}return!1}}]),e}(),wy=function(){function e(t,n,r,i){var a=this;ae(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ao.UNAUTHENTICATED,this.clientId=eu.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ro("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ro("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ue(e,[{key:"getConfiguration",value:function(){var e=qe(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new zo(qo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(qe(je().mark((function n(){var r;return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Gv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function by(e,t){return xy.apply(this,arguments)}function xy(){return xy=qe(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ro("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,vd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),xy.apply(this,arguments)}function Ey(e,t){return Sy.apply(this,arguments)}function Sy(){return Sy=qe(je().mark((function e(t,n){var r,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Iy(t);case 3:return r=e.sent,Ro("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Vv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Vv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Sy.apply(this,arguments)}function Iy(e){return _y.apply(this,arguments)}function _y(){return _y=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Ro("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,by(t,new fy);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}function Ty(e){return Cy.apply(this,arguments)}function Cy(){return Cy=qe(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Ro("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Ey(t,new vy);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Cy.apply(this,arguments)}function Ny(e){return Iy(e).then((function(e){return e.persistence}))}function Dy(e){return Iy(e).then((function(e){return e.localStore}))}function Ay(e){return Ty(e).then((function(e){return e.remoteStore}))}function Oy(e){return Ty(e).then((function(e){return e.syncEngine}))}function Py(e){return Ly.apply(this,arguments)}function Ly(){return Ly=qe(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ty(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=pp.bind(null,n.syncEngine),r.onUnlisten=kp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Ly.apply(this,arguments)}function Ry(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ko;return e.asyncQueue.enqueueAndForget(qe(je().mark((function i(){return je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new yy({next:function(a){t.enqueueAndForget((function(){return Zv(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new zo(qo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new zo(qo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new ip(ec(n.path),a,{includeMetadataChanges:!0,Du:!0});return Xv(e,o)},i.next=3,Py(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function My(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ko;return e.asyncQueue.enqueueAndForget(qe(je().mark((function i(){return je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new yy({next:function(n){t.enqueueAndForget((function(){return Zv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new zo(qo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new ip(n,a,{includeMetadataChanges:!0,Du:!0});return Xv(e,o)},i.next=3,Py(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Fy=new Map;function Vy(e,t,n){if(!n)throw new zo(qo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function jy(e,t,n,r){if(!0===t&&!0===r)throw new zo(qo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function By(e){if(!lu.isDocumentKey(e))throw new zo(qo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Uy(e){if(lu.isDocumentKey(e))throw new zo(qo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function qy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":jo()}function zy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zo(qo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=qy(e);throw new zo(qo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Ky(e,t){if(t<=0)throw new zo(qo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Gy=function(){function e(t){var n;if(ae(this,e),void 0===t.host){if(void 0!==t.ssl)throw new zo(qo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zo(qo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,jy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ue(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Qy=function(){function e(t,n,r){ae(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gy({}),this._settingsFrozen=!1,t instanceof ns?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zo(qo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ns(e.options.projectId)}(t))}return ue(e,[{key:"app",get:function(){if(!this._app)throw new zo(qo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new zo(qo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Qo;switch(e.type){case"gapi":var t=e.client;return Bo(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Yo(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new zo(qo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Fy.get(e);t&&(Ro("ComponentProvider","Removing Datastore"),Fy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Hy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=zy(e,Qy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Fo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ao.MOCK_USER;else{o=Se(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new zo(qo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ao(s)}e._authCredentials=new Ho(new Go(o,u))}}var Wy=function(){function e(t,n,r){ae(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ue(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Yy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),$y=function(){function e(t,n,r){ae(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ue(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Yy=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this,e,r,ec(i)))._path=i,a.type="collection",a}return ue(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Wy(this.firestore,null,new lu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}($y);function Xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ve(e),Vy("collection","path",t),e instanceof Qy){var a=uu.fromString.apply(uu,[t].concat(r));return Uy(a),new Yy(e,null,a)}if(!(e instanceof Wy||e instanceof Yy))throw new zo(qo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(uu.fromString.apply(uu,[t].concat(r)));return Uy(o),new Yy(e.firestore,null,o)}function Jy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ve(e),1===arguments.length&&(t=eu.I()),Vy("doc","path",t),e instanceof Qy){var a=uu.fromString.apply(uu,[t].concat(r));return By(a),new Wy(e,null,new lu(a))}if(!(e instanceof Wy||e instanceof Yy))throw new zo(qo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(uu.fromString.apply(uu,[t].concat(r)));return By(o),new Wy(e.firestore,e instanceof Yy?e.converter:null,new lu(o))}function Zy(e,t){return e=Ve(e),t=Ve(t),(e instanceof Wy||e instanceof Yy)&&(t instanceof Wy||t instanceof Yy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function em(e,t){return e=Ve(e),t=Ve(t),e instanceof $y&&t instanceof $y&&e.firestore===t.firestore&&uc(e._query,t._query)&&e.converter===t.converter}var tm=function(){function e(){var t=this;ae(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Yd(this,"async_queue_retry"),this.Kc=function(){var e=Wd();e&&Ro("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Wd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return ue(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=Wd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Ko;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=qe(je().mark((function e(){var t=this;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Nu(e.t0)){e.next=12;break}throw e.t0;case 12:Ro("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Mo("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=Kv.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&jo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=qe(je().mark((function e(){var t;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=se(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=se(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function nm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=se(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var rm=function(){function e(){ae(this,e),this._progressObserver={},this._taskCompletionResolver=new Ko,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ue(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),im=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new tm,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ue(n,[{key:"_terminate",value:function(){return this._firestoreClient||om(this),this._firestoreClient.terminate()}}]),n}(Qy);function am(e){return e._firestoreClient||om(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function om(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ts(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new wy(e._authCredentials,e._appCheckCredentials,e._queue,r)}function um(e,t,n){var r=new Ko;return e.asyncQueue.enqueue(qe(je().mark((function i(){var a;return je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,by(e,n);case 3:return i.next=5,Ey(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===qo.FAILED_PRECONDITION||e.code===qo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function sm(e){return function(e){return e.asyncQueue.enqueue(qe(je().mark((function t(){var n,r;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ny(e);case 2:return n=t.sent,t.next=5,Ay(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Uo(e);return t.lu.delete(0),rv(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(am(e=zy(e,im)))}function cm(e){return function(e){return e.asyncQueue.enqueue(qe(je().mark((function t(){var n,r;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ny(e);case 2:return n=t.sent,t.next=5,Ay(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=qe(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Uo(t)).lu.add(0),e.next=4,av(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(am(e=zy(e,im)))}function lm(e,t){var n=am(e=zy(e,im)),r=new rm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new my(e,t)}(function(e,t){if(e instanceof Uint8Array)return py(e,t);if(e instanceof ArrayBuffer)return py(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,$d(t));e.asyncQueue.enqueueAndForget(qe(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ly,t.next=3,Oy(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function fm(e,t){return function(e,t){return e.asyncQueue.enqueue(qe(je().mark((function n(){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Uo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,Dy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(am(e=zy(e,im)),t).then((function(t){return t?new $y(e,null,t.query):null}))}function hm(e){if(e._initialized||e._terminated)throw new zo(qo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dm=function(){function e(){ae(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new zo(qo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cu(n)}return ue(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var vm=function(){function e(t){ae(this,e),this._byteString=t}return ue(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Hu.fromBase64String(t))}catch(t){throw new zo(qo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Hu.fromUint8Array(t))}}]),e}(),pm=ue((function e(t){ae(this,e),this._methodName=t})),ym=function(){function e(t,n){if(ae(this,e),!isFinite(t)||t<-90||t>90)throw new zo(qo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new zo(qo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ue(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return tu(this._lat,e._lat)||tu(this._long,e._long)}}]),e}(),mm=/^__.*__$/,gm=function(){function e(t,n,r){ae(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ue(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms):new jc(e,this.data,t,this.fieldTransforms)}}]),e}(),km=function(){function e(t,n,r){ae(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ue(e,[{key:"toMutation",value:function(e,t){return new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function wm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jo()}}var bm=function(){function e(t,n,r,i,a,o){ae(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ue(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return Um(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(wm(this.Zc)&&mm.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),xm=function(){function e(t,n,r){ae(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||$d(t)}return ue(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bm({Zc:e,methodName:t,ca:n,path:cu.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function Em(e){var t=e._freezeSettings(),n=$d(e._databaseId);return new xm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);Fm("Data must be an object, but it was:",o,r);var u,s,c=Rm(r,o);if(a.merge)u=new Qu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=se(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,v=Vm(t,d,n);if(!o.contains(v))throw new zo(qo.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));qm(f,v)||f.push(v)}}catch(p){h.e(p)}finally{h.f()}u=new Qu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new gm(new Ts(c),u,s)}var Im=function(e){fe(n,e);var t=ye(n);function n(){return ae(this,n),t.apply(this,arguments)}return ue(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(pm);function _m(e,t,n){return new bm({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var Tm=function(e){fe(n,e);var t=ye(n);function n(){return ae(this,n),t.apply(this,arguments)}return ue(n,[{key:"_toFieldTransform",value:function(e){return new Nc(e.path,new bc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(pm),Cm=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e)).ha=r,i}return ue(n,[{key:"_toFieldTransform",value:function(e){var t=_m(this,e,!0),n=this.ha.map((function(e){return Lm(e,t)})),r=new xc(n);return new Nc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(pm),Nm=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e)).ha=r,i}return ue(n,[{key:"_toFieldTransform",value:function(e){var t=_m(this,e,!0),n=this.ha.map((function(e){return Lm(e,t)})),r=new Sc(n);return new Nc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(pm),Dm=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e)).la=r,i}return ue(n,[{key:"_toFieldTransform",value:function(e){var t=new _c(e.wt,yc(e.wt,this.la));return new Nc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(pm);function Am(e,t,n,r){var i=e.aa(1,t,n);Fm("Data must be an object, but it was:",i,r);var a=[],o=Ts.empty();Vu(r,(function(e,r){var u=Bm(t,e,n);r=Ve(r);var s=i.ia(u);if(r instanceof Im)a.push(u);else{var c=Lm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Qu(a);return new km(o,u,i.fieldTransforms)}function Om(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[Vm(t,r,n)],s=[i];if(a.length%2!=0)throw new zo(qo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Vm(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ts.empty(),h=u.length-1;h>=0;--h)if(!qm(l,u[h])){var d=u[h],v=s[h];v=Ve(v);var p=o.ia(d);if(v instanceof Im)l.push(d);else{var y=Lm(v,p);null!=y&&(l.push(d),f.set(d,y))}}var m=new Qu(l);return new km(f,m,o.fieldTransforms)}function Pm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Lm(n,e.aa(r?4:3,t))}function Lm(e,t){if(Mm(e=Ve(e)))return Fm("Unsupported field value:",t,e),Rm(e,t);if(e instanceof pm)return function(e,t){if(!wm(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=se(e);try{for(a.s();!(n=a.n()).done;){var o=Lm(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ve(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yc(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=iu.fromDate(e);return{timestampValue:El(t.wt,n)}}if(e instanceof iu){var r=new iu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:El(t.wt,r)}}if(e instanceof ym)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vm)return{bytesValue:Sl(t.wt,e._byteString)};if(e instanceof Wy){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Tl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(qy(e)))}(e,t)}function Rm(e,t){var n={};return ju(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vu(e,(function(e,r){var i=Lm(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Mm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof iu||e instanceof ym||e instanceof vm||e instanceof Wy||e instanceof pm)}function Fm(e,t,n){if(!Mm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=qy(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function Vm(e,t,n){if((t=Ve(t))instanceof dm)return t._internalPath;if("string"==typeof t)return Bm(e,t);throw Um("Field path arguments must be of type string or ",e,!1,void 0,n)}var jm=new RegExp("[~\\*/\\[\\]]");function Bm(e,t,n){if(t.search(jm)>=0)throw Um("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return me(dm,Be(t.split(".")))._internalPath}catch(r){throw Um("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Um(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new zo(qo.INVALID_ARGUMENT,u+e+s)}function qm(e,t){return e.some((function(e){return e.isEqual(t)}))}var zm=function(){function e(t,n,r,i,a){ae(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ue(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Wy(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Km(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Gm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Km=function(e){fe(n,e);var t=ye(n);function n(){return ae(this,n),t.apply(this,arguments)}return ue(n,[{key:"data",value:function(){return pn(he(n.prototype),"data",this).call(this)}}]),n}(zm);function Gm(e,t){return"string"==typeof t?Bm(e,t):t instanceof dm?t._internalPath:t._delegate._internalPath}var Qm=function(){function e(t,n){ae(this,e),this.hasPendingWrites=t,this.fromCache=n}return ue(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Hm=function(e){fe(n,e);var t=ye(n);function n(e,r,i,a,o,u){var s;return ae(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ue(n,[{key:"exists",value:function(){return pn(he(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Wm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Gm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(zm),Wm=function(e){fe(n,e);var t=ye(n);function n(){return ae(this,n),t.apply(this,arguments)}return ue(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return pn(he(n.prototype),"data",this).call(this,e)}}]),n}(Hm),$m=function(){function e(t,n,r,i){ae(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qm(i.hasPendingWrites,i.fromCache),this.query=r}return ue(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Wm(n._firestore,n._userDataWriter,r.key,r,new Qm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new zo(qo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Wm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Wm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Ym(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Ym(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jo()}}function Xm(e,t){return e instanceof Hm&&t instanceof Hm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof $m&&t instanceof $m&&e._firestore===t._firestore&&em(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Jm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zo(qo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Zm=ue((function e(){ae(this,e)}));function eg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var tg=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return ue(n,[{key:"_apply",value:function(e){var t=Em(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new zo(qo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){hg(o,a);var s,c=[],l=se(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(fg(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=fg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||hg(o,a),u=Pm(n,"where",o,"in"===a||"not-in"===a);var h=Vs.create(i,a,u);return function(e,t){if(t.ht()){var n=nc(e);if(null!==n&&!n.isEqual(t.field))throw new zo(qo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=tc(e);null!==r&&dg(e,t.field,r)}var i=function(e,t){var n,r=se(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new zo(qo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new zo(qo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new $y(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Js(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Zm);var ng=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return ue(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new zo(qo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zo(qo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ws(t,n);return function(e,t){if(null===tc(e)){var n=nc(e);null!==n&&dg(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new $y(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Js(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Zm);var rg=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return ue(n,[{key:"_apply",value:function(e){return new $y(e.firestore,e.converter,oc(e._query,this.ma,this.ga))}}]),n}(Zm);var ig=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ue(n,[{key:"_apply",value:function(e){var t=lg(e,this.type,this.ya,this.pa);return new $y(e.firestore,e.converter,function(e,t){return new Js(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Zm);function ag(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ig("startAt",t,!0)}function og(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ig("startAfter",t,!1)}var ug=function(e){fe(n,e);var t=ye(n);function n(e,r,i){var a;return ae(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ue(n,[{key:"_apply",value:function(e){var t=lg(e,this.type,this.ya,this.pa);return new $y(e.firestore,e.converter,function(e,t){return new Js(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Zm);function sg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ug("endBefore",t,!1)}function cg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ug("endAt",t,!0)}function lg(e,t,n,r){if(n[0]=Ve(n[0]),n[0]instanceof zm)return function(e,t,n,r,i){if(!r)throw new zo(qo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=se(ic(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ps(t,r.key));else{var c=r.data.field(s.field);if(Ju(c))throw new zo(qo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new zo(qo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Hs(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Em(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new zo(qo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new zo(qo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!rc(e)&&-1!==c.indexOf("/"))throw new zo(qo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(uu.fromString(c));if(!lu.isDocumentKey(l))throw new zo(qo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new lu(l);u.push(ps(t,f))}else{var h=Pm(n,r,c);u.push(h)}}return new Hs(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function fg(e,t,n){if("string"==typeof(n=Ve(n))){if(""===n)throw new zo(qo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rc(t)&&-1!==n.indexOf("/"))throw new zo(qo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(uu.fromString(n));if(!lu.isDocumentKey(r))throw new zo(qo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ps(e,new lu(r))}if(n instanceof Wy)return ps(e,n._key);throw new zo(qo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(qy(n),"."))}function hg(e,t){if(!Array.isArray(e)||0===e.length)throw new zo(qo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new zo(qo.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function dg(e,t,n){if(!n.isEqual(t))throw new zo(qo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var vg={maxAttempts:5},pg=function(){function e(){ae(this,e)}return ue(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Vu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new ym(Yu(e.latitude),Yu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Zu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(es(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$u(e);return new iu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=uu.fromString(e);Bo(Xl(n));var r=new ns(n.get(1),n.get(3)),i=new lu(n.popFirst(5));return r.isEqual(t)||Mo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function yg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var mg=function(e){fe(n,e);var t=ye(n);function n(e){var r;return ae(this,n),(r=t.call(this)).firestore=e,r}return ue(n,[{key:"convertBytes",value:function(e){return new vm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wy(this.firestore,null,t)}}]),n}(pg),gg=function(){function e(t,n){ae(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Em(t)}return ue(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=kg(e,this._firestore),i=yg(r.converter,t,n),a=Sm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ac.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=kg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ve(t))||t instanceof dm?Om(this._dataReader,"WriteBatch.update",i._key,t,n,o):Am(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ac.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=kg(e,this._firestore);return this._mutations=this._mutations.concat(new Qc(t._key,Ac.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new zo(qo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function kg(e,t){if((e=Ve(e)).firestore!==t)throw new zo(qo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var wg=function(e){fe(n,e);var t=ye(n);function n(e){var r;return ae(this,n),(r=t.call(this)).firestore=e,r}return ue(n,[{key:"convertBytes",value:function(e){return new vm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wy(this.firestore,null,t)}}]),n}(pg);function bg(e){e=zy(e,Wy);var t=zy(e.firestore,im),n=am(t),r=new wg(t);return function(e,t){var n=new Ko;return e.asyncQueue.enqueueAndForget(qe(je().mark((function r(){return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=qe(je().mark((function e(t,n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Uo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new zo(qo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Gv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Dy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Hm(t,r,e._key,n,new Qm(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function xg(e){e=zy(e,$y);var t=zy(e.firestore,im),n=am(t),r=new wg(t);return function(e,t){var n=new Ko;return e.asyncQueue.enqueueAndForget(qe(je().mark((function r(){return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=qe(je().mark((function e(t,n,r){var i,a,o,u,s;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sd(t,n,!0);case 3:i=e.sent,a=new fp(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Gv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Dy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new $m(t,r,e,n)}))}function Eg(e,t,n){e=zy(e,Wy);var r=zy(e.firestore,im),i=yg(e.converter,t,n);return Tg(r,[Sm(Em(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ac.none())])}function Sg(e,t,n){e=zy(e,Wy);for(var r=zy(e.firestore,im),i=Em(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Tg(r,[("string"==typeof(t=Ve(t))||t instanceof dm?Om(i,"updateDoc",e._key,t,n,o):Am(i,"updateDoc",e._key,t)).toMutation(e._key,Ac.exists(!0))])}function Ig(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ve(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||nm(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(nm(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Wy)l=zy(e.firestore,im),f=ec(e._key.path),c={next:function(t){n[s]&&n[s](Cg(l,e,t))},error:n[s+1],complete:n[s+2]};else{var v=zy(e,$y);l=zy(v.firestore,im),f=v._query;var p=new wg(l);c={next:function(e){n[s]&&n[s](new $m(l,p,v,e))},error:n[s+1],complete:n[s+2]},Jm(e._query)}return function(e,t,n,r){var i=new yy(r),a=new ip(t,i,n);return e.asyncQueue.enqueueAndForget(qe(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Xv,t.next=3,Py(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(qe(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Zv,t.next=3,Py(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(am(l),f,h,c)}function _g(e,t){return function(e,t){var n=new yy(t);return e.asyncQueue.enqueueAndForget(qe(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Uo(e).Tu.add(t),t.next()},t.next=3,Py(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(qe(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Uo(e).Tu.delete(t)},t.next=3,Py(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(am(e=zy(e,im)),nm(t)?t:{next:t})}function Tg(e,t){return function(e,t){var n=new Ko;return e.asyncQueue.enqueueAndForget(qe(je().mark((function r(){return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=bp,r.next=3,Oy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(am(e),t)}function Cg(e,t,n){var r=n.docs.get(t._key),i=new wg(e);return new Hm(e,i,t._key,r,new Qm(n.hasPendingWrites,n.fromCache),t.converter)}var Ng=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e,r))._firestore=e,i}return ue(n,[{key:"get",value:function(e){var t=this,r=kg(e,this._firestore),i=new wg(this._firestore);return pn(he(n.prototype),"get",this).call(this,e).then((function(e){return new Hm(t._firestore,i,r._key,e._document,new Qm(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ae(this,e),this._firestore=t,this._transaction=n,this._dataReader=Em(t)}return ue(e,[{key:"get",value:function(e){var t=this,n=kg(e,this._firestore),r=new mg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return jo();var i=e[0];if(i.isFoundDocument())return new zm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new zm(t._firestore,r,n._key,null,n.converter);throw jo()}))}},{key:"set",value:function(e,t,n){var r=kg(e,this._firestore),i=yg(r.converter,t,n),a=Sm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=kg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ve(t))||t instanceof dm?Om(this._dataReader,"Transaction.update",i._key,t,n,o):Am(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=kg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Dg(e,t,n){e=zy(e,im);var r=Object.assign(Object.assign({},vg),n);return function(e){if(e.maxAttempts<1)throw new zo(qo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Ko;return e.asyncQueue.enqueueAndForget(qe(je().mark((function i(){var a;return je().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return Ty(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new ky(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(am(e),(function(n){return t(new Ng(e,n))}),r)}function Ag(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cm("arrayUnion",t)}function Og(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nm("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Oo=e}(Mt),Nt(new ze("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new im(i,new Wo(e.getProvider("auth-internal")),new Jo(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),qt(Do,"3.4.11",e),qt(Do,"3.4.11","esm2017")}();function Pg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new zo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Lg(){if("undefined"===typeof Uint8Array)throw new zo("unimplemented","Uint8Arrays are not available in this environment.")}function Rg(){if("undefined"==typeof atob)throw new zo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Mg=function(){function e(t){ae(this,e),this._delegate=t}return ue(e,[{key:"toBase64",value:function(){return Rg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Lg(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Rg(),new e(vm.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Lg(),new e(vm.fromUint8Array(t))}}]),e}();function Fg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=se(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Vg=function(){function e(){ae(this,e)}return ue(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){hm(e=zy(e,im));var n=am(e),r=e._freezeSettings(),i=new vy;return um(n,i,new hy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){hm(e=zy(e,im));var t=am(e),n=e._freezeSettings(),r=new vy;return um(t,r,new dy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new zo(qo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ko;return e._queue.enqueueAndForgetEvenWhileRestricted(qe(je().mark((function n(){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=qe(je().mark((function e(t){var n;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_u.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,_u.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(cd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),jg=function(){function e(t,n,r){var i=this;ae(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ns||(this._appCompat=t)}return ue(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Fo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Hy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return sm(this._delegate)}},{key:"disableNetwork",value:function(){return cm(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&jy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ko;return e.asyncQueue.enqueueAndForget(qe(je().mark((function n(){return je().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Op,n.next=3,Oy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(am(e=zy(e,im)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return _g(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new zo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Zg(this,Xy(this._delegate,e))}catch(t){throw Gg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Kg(this,Jy(this._delegate,e))}catch(t){throw Gg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Yg(this,function(e,t){if(e=zy(e,Qy),Vy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new zo(qo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new $y(e,null,function(e){return new Js(uu.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Gg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Dg(this._delegate,(function(n){return e(new Ug(t,n))}))}},{key:"batch",value:function(){var e=this;return am(this._delegate),new qg(new gg(this._delegate,(function(t){return Tg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return lm(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return fm(this._delegate,e).then((function(e){return e?new Yg(t,e):null}))}}]),e}(),Bg=function(e){fe(n,e);var t=ye(n);function n(e){var r;return ae(this,n),(r=t.call(this)).firestore=e,r}return ue(n,[{key:"convertBytes",value:function(e){return new Mg(new vm(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Kg.forKey(t,this.firestore,null)}}]),n}(pg);var Ug=function(){function e(t,n){ae(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Bg(t)}return ue(e,[{key:"get",value:function(e){var t=this,n=ek(e);return this._delegate.get(n).then((function(e){return new Wg(t._firestore,new Hm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=ek(e);return n?(Pg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=ek(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ek(e);return this._delegate.delete(t),this}}]),e}(),qg=function(){function e(t){ae(this,e),this._delegate=t}return ue(e,[{key:"set",value:function(e,t,n){var r=ek(e);return n?(Pg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=ek(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=ek(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),zg=function(){function e(t,n,r){ae(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ue(e,[{key:"fromFirestore",value:function(e,t){var n=new Wm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $g(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Bg(t),n),i.set(n,a)),a}}]),e}();zg.INSTANCES=new WeakMap;var Kg=function(){function e(t,n){ae(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Bg(t)}return ue(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Zg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Zg(this.firestore,Xy(this._delegate,e))}catch(t){throw Gg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ve(e))instanceof Wy&&Zy(this._delegate,e)}},{key:"set",value:function(e,t){t=Pg("DocumentReference.set",t);try{return t?Eg(this._delegate,e,t):Eg(this._delegate,e)}catch(n){throw Gg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Sg(this._delegate,e):Sg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Gg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Tg(zy(e.firestore,im),[new Qc(e._key,Ac.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Qg(n),a=Hg(n,(function(t){return new Wg(e.firestore,new Hm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ig(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?bg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=zy(e,Wy);var t=zy(e.firestore,im);return Ry(am(t),e._key,{source:"server"}).then((function(n){return Cg(t,e,n)}))}(this._delegate):function(e){e=zy(e,Wy);var t=zy(e.firestore,im);return Ry(am(t),e._key).then((function(n){return Cg(t,e,n)}))}(this._delegate),t.then((function(e){return new Wg(n.firestore,new Hm(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(zg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new zo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Wy(n._delegate,r,new lu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Wy(n._delegate,r,t))}}]),e}();function Gg(e,t,n){return e.message=e.message.replace(t,n),e}function Qg(e){var t,n=se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Fg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Hg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Fg(e[0])?e[0]:Fg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Wg=function(){function e(t,n){ae(this,e),this._firestore=t,this._delegate=n}return ue(e,[{key:"ref",get:function(){return new Kg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Xm(this._delegate,e._delegate)}}]),e}(),$g=function(e){fe(n,e);var t=ye(n);function n(){return ae(this,n),t.apply(this,arguments)}return ue(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||jo()}(void 0!==t),t}}]),n}(Wg),Yg=function(){function e(t,n){ae(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Bg(t)}return ue(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,eg(this._delegate,function(e,t,n){var r=t,i=Gm("where",e);return new tg(i,r,n)}(t,n,r)))}catch(i){throw Gg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,eg(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Gm("orderBy",e);return new ng(n,t)}(t,n)))}catch(r){throw Gg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,eg(this._delegate,function(e){return Ky("limit",e),new rg("limit",e,"F")}(t)))}catch(n){throw Gg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,eg(this._delegate,function(e){return Ky("limitToLast",e),new rg("limitToLast",e,"L")}(t)))}catch(n){throw Gg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,eg(this._delegate,ag.apply(void 0,arguments)))}catch(t){throw Gg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,eg(this._delegate,og.apply(void 0,arguments)))}catch(t){throw Gg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,eg(this._delegate,sg.apply(void 0,arguments)))}catch(t){throw Gg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,eg(this._delegate,cg.apply(void 0,arguments)))}catch(t){throw Gg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return em(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?xg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=zy(e,$y);var t=zy(e.firestore,im),n=am(t),r=new wg(t);return My(n,e._query,{source:"server"}).then((function(n){return new $m(t,r,e,n)}))}(this._delegate):function(e){e=zy(e,$y);var t=zy(e.firestore,im),n=am(t),r=new wg(t);return Jm(e._query),My(n,e._query).then((function(n){return new $m(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Jg(n.firestore,new $m(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Qg(n),a=Hg(n,(function(t){return new Jg(e.firestore,new $m(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ig(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(zg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Xg=function(){function e(t,n){ae(this,e),this._firestore=t,this._delegate=n}return ue(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new $g(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Jg=function(){function e(t,n){ae(this,e),this._firestore=t,this._delegate=n}return ue(e,[{key:"query",get:function(){return new Yg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new $g(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Xg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new $g(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Xm(this._delegate,e._delegate)}}]),e}(),Zg=function(e){fe(n,e);var t=ye(n);function n(e,r){var i;return ae(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ue(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Kg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Kg(this.firestore,void 0===e?Jy(this._delegate):Jy(this._delegate,e))}catch(t){throw Gg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=zy(e.firestore,im),r=Jy(e),i=yg(e.converter,t);return Tg(n,[Sm(Em(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ac.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Kg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Zy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(zg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Yg);function ek(e){return zy(e,Wy)}var tk,nk=function(){function e(){ae(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=me(dm,n)}return ue(e,[{key:"isEqual",value:function(e){return(e=Ve(e))instanceof dm&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(cu.keyField().canonicalString())}}]),e}(),rk=function(){function e(t){ae(this,e),this._delegate=t}return ue(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Tm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Im("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Ag.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Og.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Dm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),ik={Firestore:jg,GeoPoint:ym,Timestamp:iu,Blob:Mg,Transaction:Ug,WriteBatch:qg,DocumentReference:Kg,DocumentSnapshot:Wg,Query:Yg,QueryDocumentSnapshot:$g,QuerySnapshot:Jg,CollectionReference:Zg,FieldPath:nk,FieldValue:rk,setLogLevel:function(e){!function(e){Po.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ze("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ik)))})(tk=dn,(function(e,t){return new jg(e,t,new Vg)})),tk.registerVersion("@firebase/firestore-compat","0.1.20");dn.initializeApp({apiKey:"AIzaSyCCtLJMMN0YZlVSefcAMrq3YUrb-0eMjjc",authDomain:"cooking-ninja-site-e7c79.firebaseapp.com",projectId:"cooking-ninja-site-e7c79",storageBucket:"cooking-ninja-site-e7c79.appspot.com",messagingSenderId:"208547179281",appId:"1:208547179281:web:145c37f5c324b4f1ddbab0"});var ak=dn.firestore();var ok=n.p+"static/media/trashcan.45d41f106637a0ec920a305cd2dfda1a.svg";function uk(e){var t=e.recipes,n=ne().mode;if(0===t.length)return(0,J.jsx)("div",{className:"error",children:"No recipes to load..."});return(0,J.jsx)("div",{className:"recipe-list",children:t.map((function(e){return(0,J.jsxs)("div",{className:"card ".concat(n),children:[(0,J.jsx)("h3",{children:e.title}),(0,J.jsxs)("p",{children:[e.cookingTime," to make."]}),(0,J.jsxs)("div",{children:[e.method.substring(0,100),"..."]}),(0,J.jsx)(W,{to:"/recipes/".concat(e.id),children:"Cook This"}),(0,J.jsx)("img",{src:ok,alt:"trashcan",className:"delete",onClick:function(){return function(e){ak.collection("recipes").doc(e).delete()}(e.id)}})]},e.id)}))})}function sk(){var e=u((0,r.useState)(null),2),t=e[0],n=e[1],i=u((0,r.useState)(!1),2),a=i[0],o=i[1],s=u((0,r.useState)(!1),2),c=s[0],l=s[1];return(0,r.useEffect)((function(){o(!0);var e=ak.collection("recipes").onSnapshot((function(e){if(e.empty)l("No recipes to load"),o(!1);else{var t=[];e.docs.forEach((function(e){t.push(X({id:e.id},e.data()))})),n(t),o(!1)}}),(function(e){l(e.message),o(!1)}));return function(){return e()}}),[]),(0,J.jsxs)("div",{className:"home",children:[c&&(0,J.jsx)("p",{className:"error",children:c}),a&&(0,J.jsx)("p",{className:"loading",children:"Loading..."}),t&&(0,J.jsx)(uk,{recipes:t})]})}function ck(){var e=u((0,r.useState)(""),2),t=e[0],n=e[1],i=u((0,r.useState)(""),2),a=i[0],o=i[1],s=u((0,r.useState)(""),2),c=s[0],l=s[1],f=u((0,r.useState)(""),2),h=f[0],d=f[1],v=u((0,r.useState)([]),2),p=v[0],y=v[1],m=(0,r.useRef)(null),g=F(),k=function(){var e=qe(je().mark((function e(n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={title:t,ingredients:p,method:a,cookingTime:c+" minutes"},e.prev=2,e.next=5,ak.collection("recipes").add(r);case 5:g.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,J.jsxs)("div",{className:"create",children:[(0,J.jsx)("h2",{className:"page-title",children:"Add a New Recipe"}),(0,J.jsxs)("form",{onSubmit:k,children:[(0,J.jsxs)("label",{children:[(0,J.jsx)("span",{children:"Recipe title:"}),(0,J.jsx)("input",{type:"text",onChange:function(e){return n(e.target.value)},value:t,required:!0})]}),(0,J.jsxs)("label",{children:[(0,J.jsx)("span",{children:"Recipe Ingredients:"}),(0,J.jsxs)("div",{className:"ingredients",children:[(0,J.jsx)("input",{type:"text",onChange:function(e){return d(e.target.value)},value:h,ref:m}),(0,J.jsx)("button",{onClick:function(e){e.preventDefault();var t=h.trim();t&&!p.includes(t)&&y((function(e){return[].concat(Be(e),[t])})),d(""),m.current.focus()},className:"btn",children:"Add"})]})]}),(0,J.jsxs)("p",{children:["Current Ingredients: ",p.map((function(e){return(0,J.jsxs)("em",{children:[e," "]},e)}))]}),(0,J.jsxs)("label",{children:[(0,J.jsx)("span",{children:"Recipe method:"}),(0,J.jsx)("textarea",{onChange:function(e){return o(e.target.value)},value:a,required:!0})]}),(0,J.jsxs)("label",{children:[(0,J.jsx)("span",{children:"Cooking time (minutes):"}),(0,J.jsx)("input",{type:"number",onChange:function(e){return l(e.target.value)},value:c,required:!0})]}),(0,J.jsx)("button",{className:"btn",children:"Submit"})]})]})}function lk(){var e=M().search,t=new URLSearchParams(e).get("q"),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=u((0,r.useState)(null),2),i=n[0],a=n[1],o=u((0,r.useState)(!1),2),s=o[0],c=o[1],l=u((0,r.useState)(null),2),f=l[0],h=l[1],d=u((0,r.useState)(null),2),v=d[0],p=d[1],y=function(e){p({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})};return(0,r.useEffect)((function(){var n=new AbortController,r=function(){var t=qe(je().mark((function t(r){var i,o;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,fetch(e,X(X({},r),{},{signal:n.signal}));case 4:if((i=t.sent).ok){t.next=7;break}throw new Error(i.statusText);case 7:return t.next=9,i.json();case 9:o=t.sent,c(!1),a(o),h(null),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),"AbortError"===t.t0.name?console.log("the fetch was aborted"):(c(!1),h("Could not fetch the data"));case 18:case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}();return"GET"===t&&r(),"POST"===t&&r(v),function(){n.abort()}}),[e,v,t]),{data:i,isPending:s,error:f,postData:y}}("http://localhost:3000/recipes?q="+t),i=n.error,a=n.isPending,o=n.data;return(0,J.jsxs)("div",{children:[(0,J.jsxs)("h2",{className:"page-title",children:['Recipes Including "',t,'"']}),i&&(0,J.jsx)("p",{className:"error",children:i}),a&&(0,J.jsx)("p",{className:"loading",children:"Loading..."}),o&&(0,J.jsx)(uk,{recipes:o})]})}function fk(){var e=function(){var e=(0,r.useContext)(k).matches,t=e[e.length-1];return t?t.params:{}}().id,t=ne().mode,n=u((0,r.useState)(null),2),i=n[0],a=n[1],o=u((0,r.useState)(!1),2),s=o[0],c=o[1],l=u((0,r.useState)(!1),2),f=l[0],h=l[1];(0,r.useEffect)((function(){c(!0);var t=ak.collection("recipes").doc(e).onSnapshot((function(e){e.exists?(c(!1),a(e.data())):(c(!1),h("Could not find that recipe"))}));return function(){return t()}}),[e]);return(0,J.jsxs)("div",{className:"recipe ".concat(t),children:[f&&(0,J.jsx)("p",{className:"error",children:f}),s&&(0,J.jsx)("p",{className:"loading",children:"Loading..."}),i&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("h2",{className:"page title",children:i.title}),(0,J.jsxs)("p",{children:["Takes ",i.cookingTime," to make."]}),(0,J.jsx)("ul",{children:i.ingredients.map((function(e){return(0,J.jsx)("li",{children:e},e)}))}),(0,J.jsx)("p",{className:"method",children:i.method}),(0,J.jsx)("button",{onClick:function(){ak.collection("recipes").doc(e).update({title:"New Title"})},children:"Update Me!"})]})]})}var hk=n.p+"static/media/mode-icon.18c28fe17c345416a73d3e3551755d66.svg",dk=["#58249c","#249c6b","#b70233"];function vk(){var e=ne(),t=e.changeColor,n=e.changeMode,r=e.mode;return(0,J.jsxs)("div",{className:"theme-selector",children:[(0,J.jsx)("div",{className:"mode-toggle",children:(0,J.jsx)("img",{src:hk,alt:"darkmode-toggle icon",onClick:function(){n("dark"===r?"light":"dark")},style:{filter:"dark"===r?"invert(100%)":"invert(20%)"}})}),(0,J.jsx)("div",{className:"theme-buttons",children:dk.map((function(e){return(0,J.jsx)("div",{onClick:function(){return t(e)},style:{background:e}},e)}))})]})}var pk=function(){var e=ne().mode;return(0,J.jsx)("div",{className:"App ".concat(e),children:(0,J.jsxs)(H,{children:[(0,J.jsx)(ie,{}),(0,J.jsx)(vk,{}),(0,J.jsxs)(q,{children:[(0,J.jsx)(B,{path:"/",element:(0,J.jsx)(sk,{})}),(0,J.jsx)(B,{path:"/create",element:(0,J.jsx)(ck,{})}),(0,J.jsx)(B,{path:"search",element:(0,J.jsx)(lk,{})}),(0,J.jsx)(B,{path:"/recipes/:id",element:(0,J.jsx)(fk,{})})]})]})})};i.render((0,J.jsx)(r.StrictMode,{children:(0,J.jsx)(te,{children:(0,J.jsx)(pk,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.ac2a616e.js.map